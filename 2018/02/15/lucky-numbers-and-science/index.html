<!DOCTYPE html>
<html lang="en">
    <head>
        
        <!-- Bootstrap Setup -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="ROBOTS" content="INDEX,FOLLOW">
        <meta name="description" content="I tried to solve a coding challenge and ended up doing science.">
        <meta name="keywords" content="blog, code, developer, programming, learning, teaching, dev, Ryan, Ryan Palo, ruby, puzzle, performance">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="assert_not magic? | Lucky Numbers and Science">
        <meta name="twitter:site" content="@paytastic">
        <meta name="twitter:description" content="I tried to solve a coding challenge and ended up doing science.">
        <meta name="twitter:image" content="http://assertnotmagic.com/img/lucky.jpg">
        <meta name="twitter:creator" content="@paytastic">
        <meta name="og:url" content="http://assertnotmagic.com/2018/02/15/lucky-numbers-and-science/">
        <meta name="og:title" content="assert_not magic? | Lucky Numbers and Science">
        <meta name="og:description" content="I tried to solve a coding challenge and ended up doing science.">
        <meta name="og:image" content="http://assertnotmagic.com/img/lucky.jpg">

        <!-- Favicon settings -->
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/manifest.json">
        <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#222222">
        <meta name="theme-color" content="#ffffff">

        <!-- Omnisearch -->
        <link rel="search" type="application/opensearchdescription+xml" title="search assert_not magic" href="/opensearch.xml">
        
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
        
        <title>assert_not magic?</title>
    </head>
    <body>
        
<nav id="main-nav">
    <a href="/" class="mobile-home">assert_not magic?</a>
    <ul>
        <li class="logo"><a href="/">assert_not magic?</a></li>
        <li><a href="/posts/">All Posts</a></li>
        <li><a href="/about/">About Ryan</a></li>
        <li><a href="/sketches/">Sketches</a></li>
        <li><a href="/uses/">Uses</a></li>
    </ul>
</nav>
        <div class="container main">
                <article class="site-wrap">
    <div id="cover">
        
        <img alt="Cover Image" class="cover-image" src="/img/lucky.jpg">
        
    </div>
    <h1>Lucky Numbers and Science</h1>
    <p>Earlier this week, <a href="https://dev.to/heikodudzus">Heiko Dudzus</a> posted <a href="https://dev.to/heikodudzus/write-a-program-or-script-to-find-lucky-numbers--23me">this challenge post</a> on Dev.to.  The challenge was this:</p>

<blockquote>
  <p>Write a program or script in your language of choice, that prints the lucky numbers between 1 and n.  Try to make it as fast as possible for sieving lucky numbers between 1 and a million. (Perhaps it is sensible to measure the time without printing the results.)</p>
</blockquote>

<p>A lucky number is defined as a number that survives the <a href="https://en.wikipedia.org/wiki/Lucky_number">Sieve of Josephus</a>.  I’m going to quote the original post here so you get the idea.</p>

<blockquote>
  <p>The 1 is lucky by definition.</p>

  <p>The successor of 1 is 2. So, every second number gets eliminated:
1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, …</p>

  <p>The next number is 3. Now, every third number gets eliminated:
1, 3, 7, 9, 13, 15, 19, 21, …</p>

  <p>Number 3 is lucky! It’s successor is 7. Now, every seventh number gets eliminated. And so on.</p>
</blockquote>

<p>See the link above for more details.  I advise you to give the challenge a try if you haven’t yet before you read the rest of the post, since I’m about to tell you about my solutions.</p>

<p>I came up with two solutions, but the best solution ended up being an interesting combination of them both.  You’ll see what I mean.</p>

<h2 id="solution-1-naively-run-the-algorithm">Solution 1: Naively Run the Algorithm</h2>

<p>I like the quote “Make it work, make it right, make it fast”, which, as far as I can tell, this is attributed to <a href="https://gist.github.com/OnesimusUnbound/3064220">Kent Beck</a>.  Therefore, my first solution focused on coding things exactly like the problem was provided, the easy way, whether or not this was the fastest way.</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">lucky_numbers</span><span class="p">(</span><span class="n">max</span><span class="p">)</span>
  <span class="n">possibles</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="nf">.</span><span class="n">max</span><span class="p">).</span><span class="nf">to_a</span>
  <span class="mi">1</span><span class="p">.</span><span class="nf">step</span> <span class="k">do</span> <span class="o">|</span><span class="n">current_index</span><span class="o">|</span>
    <span class="k">break</span> <span class="k">if</span> <span class="n">current_index</span> <span class="o">&gt;=</span> <span class="n">possibles</span><span class="p">.</span><span class="nf">size</span>

    <span class="n">step_size</span> <span class="o">=</span> <span class="n">possibles</span><span class="p">[</span><span class="n">current_index</span><span class="p">]</span>
    <span class="n">possibles</span> <span class="o">=</span> <span class="n">reject_every_nth_item</span><span class="p">(</span><span class="n">possibles</span><span class="p">,</span> <span class="n">step_size</span><span class="p">)</span>
    
    <span class="c1"># If current_index is one of the items to get wiped out</span>
    <span class="c1"># the same current index will actually point at the next</span>
    <span class="c1"># number.  Reuse this index.</span>
    <span class="k">redo</span> <span class="k">if</span> <span class="n">wiped_out?</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">step_size</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">possibles</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">reject_every_nth_item</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
  <span class="n">items</span><span class="p">.</span><span class="nf">reject</span><span class="p">.</span><span class="nf">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">_</span><span class="p">,</span> <span class="n">ind</span><span class="o">|</span>
  	<span class="p">((</span><span class="n">ind</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">n</span><span class="p">).</span><span class="nf">zero?</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">wiped_out?</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">step_size</span><span class="p">)</span>
  <span class="p">((</span><span class="n">ind</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">step_size</span><span class="p">).</span><span class="nf">zero?</span>
<span class="k">end</span>
</code></pre>
</div>

<p>I was all proud of myself as I ran it.  And then I ran it with <code class="highlighter-rouge">max = 1_000_000</code>.  And I sat.  And I sat…</p>

<p><em>This is taking too long!</em>   I could to do better.</p>

<h2 id="solution-2-focus-on-the-keeps-not-the-rejects">Solution 2: Focus on the Keeps, not the Rejects</h2>

<p>As I was experimenting and testing things out, I noticed that, at the higher values of <code class="highlighter-rouge">step_size</code>, the naive algorithm was only rejecting a number every so often.  So I thought to myself, “What if we could take the step size out of the equation and make each step take roughly the same amount of time, regardless of how many elements there were in it?”  So, instead of checking each item to see if it was a reject, I calculated out the size of the chunk of <em>non-rejected</em> numbers and copied those into a <code class="highlighter-rouge">results</code> array, ignoring the rejects instead of explicitly rejecting them.</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">lucky_numbers</span><span class="p">(</span><span class="n">max</span><span class="p">)</span>
  <span class="n">possibles</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="nf">.</span><span class="n">max</span><span class="p">).</span><span class="nf">to_a</span>
  <span class="mi">1</span><span class="p">.</span><span class="nf">step</span> <span class="k">do</span> <span class="o">|</span><span class="n">current_index</span><span class="o">|</span>
    <span class="k">break</span> <span class="k">if</span> <span class="n">current_index</span> <span class="o">&gt;=</span> <span class="n">possibles</span><span class="p">.</span><span class="nf">size</span>
    
    <span class="n">step_size</span> <span class="o">=</span> <span class="n">possibles</span><span class="p">[</span><span class="n">current_index</span><span class="p">]</span>
    <span class="n">possibles</span> <span class="o">=</span> <span class="n">grab_chunks_between_rejects</span><span class="p">(</span><span class="n">possibles</span><span class="p">,</span> <span class="n">step_size</span><span class="p">)</span>
      
    <span class="k">redo</span> <span class="k">if</span> <span class="n">wiped_out?</span><span class="p">(</span><span class="n">current_index</span><span class="p">,</span> <span class="n">step_size</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">possibles</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">grab_chunks_between_rejects</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
  <span class="n">chunk_count</span> <span class="o">=</span> <span class="p">(</span><span class="n">items</span><span class="p">.</span><span class="nf">size</span> <span class="o">/</span> <span class="n">n</span><span class="p">).</span><span class="nf">floor</span>
    
  <span class="c1"># The new array will be the same size minus one reject item</span>
  <span class="c1"># for every chunk possible</span>
  <span class="n">result</span> <span class="o">=</span> <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">items</span><span class="p">.</span><span class="nf">size</span> <span class="o">-</span> <span class="n">chunk_count</span><span class="p">)</span>
  <span class="n">chunk_target_index</span> <span class="o">=</span> <span class="mi">0</span>
    
  <span class="c1"># Some tricky indexing...</span>
  <span class="c1"># 1) Select chunks of size n - 1 (so as to not include the reject endpoint)</span>
  <span class="c1"># 2) Copy it into the results array</span>
  <span class="c1"># 3) Continue, each chunk after the one in front of it.</span>
  <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="nf">.</span><span class="p">.</span><span class="nf">items</span><span class="p">.</span><span class="nf">size</span><span class="p">).</span><span class="nf">step</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">chunk_start</span><span class="o">|</span>
  	<span class="n">chunk</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="n">chunk_start</span><span class="p">.</span><span class="nf">.</span><span class="o">.</span><span class="p">(</span><span class="n">chunk_start</span> <span class="o">+</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="n">result</span><span class="p">[</span><span class="n">chunk_target_index</span><span class="p">.</span><span class="nf">.</span><span class="o">.</span><span class="p">(</span><span class="n">chunk_target_index</span> <span class="o">+</span> <span class="n">chunk</span><span class="p">.</span><span class="nf">size</span><span class="p">)]</span> <span class="o">=</span> <span class="n">chunk</span>
    <span class="n">chunk_target_index</span> <span class="o">+=</span> <span class="n">chunk</span><span class="p">.</span><span class="nf">size</span>
  <span class="k">end</span>
  <span class="n">result</span>
<span class="k">end</span>
  
<span class="k">def</span> <span class="nf">wiped_out?</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">step_size</span><span class="p">)</span>
  <span class="p">((</span><span class="n">ind</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">step_size</span><span class="p">).</span><span class="nf">zero?</span>
<span class="k">end</span>

</code></pre>
</div>

<p>This one worked great!  Even on my little laptop, it ran relatively quickly (don’t worry, the benchmarks are coming).  But something felt weird.  My programmer senses were tingling.</p>

<p>I had no proof at this point, but it seemed like all of the setup and creation of a second array each “round” should cause this algorithm to perform poorly at small <code class="highlighter-rouge">step_size</code>s.  It was at this point that this ceased to be a code challenge and became a science experiment.</p>

<h2 id="solution-3-a-combination-of-the-two">Solution 3: A Combination of the Two</h2>

<blockquote>
  <p><strong>HYPOTHESIS: There is a performance trade-off between the low and high end for my two solutions.  Thus, there should be a combination of the two that is faster than either one as a stand-alone.</strong></p>
</blockquote>

<p>If there <em>was</em> a trade-off somewhere between the two solutions, I would be able to run a few tests and find the best possible combination.  I quickly updated my <code class="highlighter-rouge">lucky_numbers</code> method.</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">lucky_numbers</span><span class="p">(</span><span class="n">max</span><span class="p">,</span> <span class="n">strategy_switch</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
  <span class="n">possibles</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="nf">.</span><span class="n">max</span><span class="p">).</span><span class="nf">to_a</span>
  <span class="mi">1</span><span class="p">.</span><span class="nf">step</span> <span class="k">do</span> <span class="o">|</span><span class="n">current_index</span><span class="o">|</span>
    <span class="k">break</span> <span class="k">if</span> <span class="n">current_index</span> <span class="o">&gt;=</span> <span class="n">possibles</span><span class="p">.</span><span class="nf">size</span>
    
    <span class="n">step_size</span> <span class="o">=</span> <span class="n">possibles</span><span class="p">[</span><span class="n">current_index</span><span class="p">]</span>

    <span class="c1"># Calculate next round of numbers</span>
    <span class="n">possibles</span> <span class="o">=</span> <span class="k">if</span> <span class="n">step_size</span> <span class="o">&lt;=</span> <span class="n">strategy_switch</span>
                  <span class="n">reject_every_nth_item</span><span class="p">(</span><span class="n">possibles</span><span class="p">,</span> <span class="n">step_size</span><span class="p">)</span>
                <span class="k">else</span>
                  <span class="n">grab_chunks_between_rejects</span><span class="p">(</span><span class="n">possibles</span><span class="p">,</span> <span class="n">step_size</span><span class="p">)</span>
                <span class="k">end</span>
      
    <span class="k">redo</span> <span class="k">if</span> <span class="n">wiped_out?</span><span class="p">(</span><span class="n">current_index</span><span class="p">,</span> <span class="n">step_size</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">possibles</span>
<span class="k">end</span>
</code></pre>
</div>

<p>And now to collect some data!  For sanity’s sake, I wrapped each function in a module to differentiate them.</p>

<p><img src="/img/data-data-data.gif" alt="Data, data, data!  I cannot make bricks without clay." /></p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="nb">require</span> <span class="s2">"benchmark"</span>

<span class="nb">require_relative</span> <span class="s2">"lucky_numbers3"</span>

<span class="n">max_nums</span> <span class="o">=</span> <span class="mi">1_000_000</span>
<span class="n">switch_levels</span> <span class="o">=</span> <span class="p">[</span>
  <span class="mi">2</span><span class="p">,</span>
  <span class="mi">10</span><span class="p">,</span>
  <span class="mi">100</span><span class="p">,</span>
  <span class="mi">500</span><span class="p">,</span>
  <span class="mi">1000</span><span class="p">,</span>
  <span class="mi">5000</span><span class="p">,</span>
  <span class="mi">10_000</span><span class="p">,</span>
  <span class="mi">50_000</span><span class="p">,</span>
  <span class="mi">100_000</span><span class="p">,</span>
  <span class="mi">500_000</span><span class="p">,</span>
<span class="p">]</span>

<span class="no">Benchmark</span><span class="p">.</span><span class="nf">bm</span> <span class="k">do</span> <span class="o">|</span><span class="n">bm</span><span class="o">|</span>
  <span class="n">switch_levels</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">level</span><span class="o">|</span>
    <span class="n">bm</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="n">level</span><span class="p">.</span><span class="nf">to_i</span><span class="p">)</span> <span class="k">do</span>
      <span class="no">Lucky3</span><span class="o">::</span><span class="n">lucky_numbers</span><span class="p">(</span><span class="n">max_nums</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># ▶ ruby optimize_lucky3.rb</span>
<span class="c1">#        user     system      total        real</span>
<span class="c1">#      2 17.550718  21.655086  39.205804 ( 39.535233)</span>
<span class="c1">#     10 18.351711  23.234818  41.586529 ( 42.615220)</span>
<span class="c1">#    100 18.443557  22.266405  40.709962 ( 41.178138)</span>
<span class="c1">#    500 20.278373  23.325708  43.604081 ( 44.987643)</span>
<span class="c1">#   1000 20.725864  22.510307  43.236171 ( 43.617160)</span>
<span class="c1">#   5000 27.245503  21.725938  48.971441 ( 49.304915)</span>
<span class="c1">#  10000 33.828295  22.476806  56.305101 ( 56.742865)</span>
<span class="c1">#  50000 82.069851  37.399753 119.469604 (120.174670)</span>
<span class="c1"># 100000 120.410101  23.425739 143.835840 (144.841090)</span>
<span class="c1"># 500000 445.835956  31.520488 477.356444 (483.688845)</span>
</code></pre>
</div>

<p>And no science experiment is complete without plots!  Unfortunately, the data visualization story (outside of the web) is not as cushy in Ruby as it is in Python.  Fortunately, I found a wrapper for Python’s <code class="highlighter-rouge">matplotlib</code> so I could stay in Ruby land for now.  Note that I used a log-based scale on the X-axis to better display my results.</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># plot_lucky3.rb</span>

<span class="nb">require</span> <span class="s2">"matplotlib/pyplot"</span>

<span class="n">plt</span> <span class="o">=</span> <span class="no">Matplotlib</span><span class="o">::</span><span class="no">Pyplot</span>

<span class="n">xs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">5000</span><span class="p">,</span> <span class="mi">10_000</span><span class="p">,</span> <span class="mi">50_000</span><span class="p">,</span> <span class="mi">100_000</span><span class="p">,</span> <span class="mi">500_000</span><span class="p">]</span>
<span class="n">ys</span> <span class="o">=</span> <span class="p">[</span>
  <span class="mi">39</span><span class="o">.</span><span class="mi">54</span><span class="p">,</span>
  <span class="mi">42</span><span class="o">.</span><span class="mi">62</span><span class="p">,</span>
  <span class="mi">41</span><span class="o">.</span><span class="mi">18</span><span class="p">,</span>
  <span class="mi">44</span><span class="o">.</span><span class="mi">99</span><span class="p">,</span>
  <span class="mi">43</span><span class="o">.</span><span class="mi">62</span><span class="p">,</span>
  <span class="mi">49</span><span class="o">.</span><span class="mi">30</span><span class="p">,</span>
  <span class="mi">56</span><span class="o">.</span><span class="mi">74</span><span class="p">,</span>
  <span class="mi">120</span><span class="o">.</span><span class="mi">17</span><span class="p">,</span>
  <span class="mi">144</span><span class="o">.</span><span class="mi">84</span><span class="p">,</span>
  <span class="mi">483</span><span class="o">.</span><span class="mi">69</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">gca</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="nf">scatter</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="nf">set_xscale</span><span class="p">(</span><span class="s1">'log'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre>
</div>

<p><img src="/img/lucky3-results.png" alt="Lucky 3 results" /></p>

<p>This is the part that is confusing to me.  I’ve run the experiment multiple times and I always end up with a dip at around 1000.  We’ll talk about that in a moment.  Here are the benchmarks of each solution directly compared.</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="nb">require</span> <span class="s2">"benchmark"</span>

<span class="nb">require_relative</span> <span class="s2">"lucky_numbers"</span>
<span class="nb">require_relative</span> <span class="s2">"lucky_numbers2"</span>
<span class="nb">require_relative</span> <span class="s2">"lucky_numbers3"</span>

<span class="n">iterations</span> <span class="o">=</span> <span class="mi">1_000_000</span>

<span class="no">Benchmark</span><span class="p">.</span><span class="nf">bm</span> <span class="k">do</span> <span class="o">|</span><span class="n">bm</span><span class="o">|</span>
  <span class="n">bm</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="s2">"Version 1"</span><span class="p">)</span> <span class="k">do</span>
    <span class="no">Lucky1</span><span class="o">::</span><span class="n">lucky_numbers</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">bm</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="s2">"Version 2"</span><span class="p">)</span> <span class="k">do</span>
    <span class="no">Lucky2</span><span class="o">::</span><span class="n">lucky_numbers</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">bm</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="s2">"Version 3"</span><span class="p">)</span> <span class="k">do</span>
    <span class="no">Lucky3</span><span class="o">::</span><span class="n">lucky_numbers</span><span class="p">(</span><span class="n">iterations</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

</code></pre>
</div>

<p>And the results:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>▶ ruby lucky_number_timer.rb
          user        system    total      real
Version 1 794.304851  28.946642 823.251493 (826.377494)
Version 2  23.267372  33.858966  57.126338 ( 57.238392)
Version 3  19.517162  20.816684  40.333846 ( 40.470201)
</code></pre>
</div>

<h2 id="conclusion">Conclusion</h2>

<blockquote>
  <p><strong>CONCLUSION: My hypothesis was supported.  A combination of the two solutions performs better than either one solution by itself.  However, the reason behind this is probably not the one that I initially thought.  Some further research is required to find out why this worked.</strong></p>
</blockquote>

<p>My wife teaches middle school science and I just got done helping her judge their science fair, so I’ve got experimentation on the brain.  Hopefully this little experiment makes her proud!</p>

<p>I’m sure my solution wasn’t the best possible solution, but it gets the job done.  Ruby isn’t necessarily the language of choice for high-throughput calculations (<a href="https://blog.heroku.com/ruby-3-by-3">although it’s not necessarily a bad choice either</a>).  If anybody can come up with a convincing reason for why my data came out the way it did, including the dip at 1000, I’ll personally send you a shiny new trophy emoji. 🏆  Also, if you’ve got a solution that you like better than these, I want to see it.  Share it! (or share a link to your solution commented on <a href="https://dev.to/heikodudzus/write-a-program-or-script-to-find-lucky-numbers--23me">Heiko’s original post</a>).</p>

    <small>
        Author: Ryan Palo | Tags: 
        
        <a href="/tags/ruby/">ruby</a>
        
        <a href="/tags/puzzle/">puzzle</a>
        
        <a href="/tags/performance/">performance</a>
        
    </small>

    <hr>

<!-- Footer for Homepage -->
  <div id="home-footer">
    <div id="left-home-footer">
      <!-- Featured Posts List -->
      <h2>Featured Posts</h2>
      <ul class="post-list">
        <li>
          <span class="post-meta">Jan 18, 2017</span><br />
          <a class="post-link" href="/2017/01/18/assert-not-magic/">Assert Not Magic</a>
        </li>
        
          <li>
            <span class="post-meta">Feb 19, 2018</span><br/>
            <a class="post-link" href="/2018/02/19/getting-things-done/">Getting Things Done - A Programmer Productivity Guide</a>
          </li>
        
          <li>
            <span class="post-meta">Feb 15, 2018</span><br/>
            <a class="post-link" href="/2018/02/15/lucky-numbers-and-science/">Lucky Numbers and Science</a>
          </li>
        
          <li>
            <span class="post-meta">Feb 10, 2018</span><br/>
            <a class="post-link" href="/2018/02/10/closure-i-hardly-know-her/">Closure? I Hardly Know Her!</a>
          </li>
        
      </ul>
    </div>
    <div id="center-home-footer">
      <!-- Spacer -->
    </div>
    <div id="right-home-footer">
      <!-- Tags List -->
      <h2>Tags</h2>
      <p>
        
        <a href="/tags/python/" style="font-size: 56px">python | </a>
        
        <a href="/tags/django/" style="font-size: 22px">django | </a>
        
        <a href="/tags/rails/" style="font-size: 14px">rails | </a>
        
        <a href="/tags/algorithms/" style="font-size: 22px">algorithms | </a>
        
        <a href="/tags/editors/" style="font-size: 16px">editors | </a>
        
        <a href="/tags/emacs/" style="font-size: 16px">emacs | </a>
        
        <a href="/tags/ai/" style="font-size: 14px">ai | </a>
        
        <a href="/tags/r/" style="font-size: 14px">r | </a>
        
        <a href="/tags/tools/" style="font-size: 16px">tools | </a>
        
        <a href="/tags/javascript/" style="font-size: 26px">javascript | </a>
        
        <a href="/tags/not_magic/" style="font-size: 14px">not_magic | </a>
        
        <a href="/tags/soft-skills/" style="font-size: 22px">soft-skills | </a>
        
        <a href="/tags/tricks/" style="font-size: 32px">tricks | </a>
        
        <a href="/tags/vscode/" style="font-size: 14px">vscode | </a>
        
        <a href="/tags/vim/" style="font-size: 16px">vim | </a>
        
        <a href="/tags/sublime/" style="font-size: 14px">sublime | </a>
        
        <a href="/tags/puzzle/" style="font-size: 20px">puzzle | </a>
        
        <a href="/tags/bash/" style="font-size: 16px">bash | </a>
        
        <a href="/tags/math/" style="font-size: 16px">math | </a>
        
        <a href="/tags/teaching/" style="font-size: 16px">teaching | </a>
        
        <a href="/tags/ruby/" style="font-size: 30px">ruby | </a>
        
        <a href="/tags/jekyll/" style="font-size: 16px">jekyll | </a>
        
        <a href="/tags/git/" style="font-size: 18px">git | </a>
        
        <a href="/tags/physics/" style="font-size: 14px">physics | </a>
        
        <a href="/tags/fun/" style="font-size: 18px">fun | </a>
        
        <a href="/tags/scientific/" style="font-size: 14px">scientific | </a>
        
        <a href="/tags/pythonic/" style="font-size: 16px">pythonic | </a>
        
        <a href="/tags/functional/" style="font-size: 20px">functional | </a>
        
        <a href="/tags/vue/" style="font-size: 22px">vue | </a>
        
        <a href="/tags/es6/" style="font-size: 20px">es6 | </a>
        
        <a href="/tags/tutorial/" style="font-size: 32px">tutorial | </a>
        
        <a href="/tags/exercise/" style="font-size: 14px">exercise | </a>
        
        <a href="/tags/fitness/" style="font-size: 14px">fitness | </a>
        
        <a href="/tags/sysadmin/" style="font-size: 16px">sysadmin | </a>
        
        <a href="/tags/linux/" style="font-size: 14px">linux | </a>
        
        <a href="/tags/html/" style="font-size: 18px">html | </a>
        
        <a href="/tags/seo/" style="font-size: 14px">seo | </a>
        
        <a href="/tags/social/" style="font-size: 14px">social | </a>
        
        <a href="/tags/metaprogramming/" style="font-size: 14px">metaprogramming | </a>
        
        <a href="/tags/css/" style="font-size: 14px">css | </a>
        
        <a href="/tags/front-end/" style="font-size: 16px">front-end | </a>
        
        <a href="/tags/animations/" style="font-size: 14px">animations | </a>
        
        <a href="/tags/p5/" style="font-size: 20px">p5 | </a>
        
        <a href="/tags/beginner/" style="font-size: 20px">beginner | </a>
        
        <a href="/tags/encouragement/" style="font-size: 18px">encouragement | </a>
        
        <a href="/tags/not-magic/" style="font-size: 14px">not-magic | </a>
        
        <a href="/tags/screencast/" style="font-size: 14px">screencast | </a>
        
        <a href="/tags/showdev/" style="font-size: 14px">showdev | </a>
        
        <a href="/tags/interview/" style="font-size: 14px">interview | </a>
        
        <a href="/tags/performance/" style="font-size: 16px">performance | </a>
        
        <a href="/tags/editor/" style="font-size: 14px">editor | </a>
        
        <a href="/tags/workflow/" style="font-size: 14px">workflow | </a>
        
        <a href="/tags/best-practice/" style="font-size: 14px">best-practice | </a>
        
        <a href="/tags/oss/" style="font-size: 14px">oss | </a>
        
        <a href="/tags/static-site/" style="font-size: 14px">static-site | </a>
        
        <a href="/tags/big-o/" style="font-size: 14px">big-o | </a>
        
        <a href="/tags/linked-lists/" style="font-size: 14px">linked-lists | </a>
        
        <a href="/tags/design-intent/" style="font-size: 14px">design-intent | </a>
        
        <a href="/tags/struct/" style="font-size: 14px">struct | </a>
        
        <a href="/tags/browser/" style="font-size: 14px">browser | </a>
        
        <a href="/tags/focus/" style="font-size: 14px">focus | </a>
        
        <a href="/tags/productivity/" style="font-size: 16px">productivity | </a>
        
        <a href="/tags/codenewbie/" style="font-size: 14px">codenewbie | </a>
        
        <a href="/tags/reflection/" style="font-size: 14px">reflection | </a>
        
        <a href="/tags/update/" style="font-size: 14px">update | </a>
        
        <a href="/tags/preview/" style="font-size: 14px">preview | </a>
        
        <a href="/tags/gtd/" style="font-size: 14px">gtd | </a>
        
      </p>
    </div>
  </div>
  <hr>
  

  <p class="rss-subscribe contact">Like my stuff?  Have questions or feedback for me?  Want to mentor me or get my help with something?  <a href="/about/">Get in touch!</a>  To stay updated, subscribe <a href="/feed.xml">via RSS</a></p>



</article>
        </div>

        <footer id="main-footer">
    <div class="container">
        <p class="text-muted">&copy; Ryan Palo 2018 | All things.  Phil. 4:13</p>
    </div>
</footer>
        <!-- Scripts -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
        <script src="/js/main.js"></script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-91889165-1', 'auto');
            ga('send', 'pageview');

        </script>
        
    </body>
</html>