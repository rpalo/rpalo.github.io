<!DOCTYPE html>
<html lang="en">
    <head>
        
        <!-- Bootstrap Setup -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">-->
        
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/syntax.css">
        
        <title>assert_not magic?</title>
    </head>
    <body>
        
<nav id="main-nav">
    <a href="/" class="mobile-home">assert_not magic?</a>
    <ul>
        <li class="logo"><a href="/">assert_not magic?</a></li>
        <li><a href="/posts/">All Posts</a></li>
        <li><a href="/about/">About</a></li>
        <li><a href="/sketches/">Sketches</a></li>
        <li><a href="/todo/">To-Do</a></li>
    </ul>
</nav>
        <div class="container main">
                <article class="site-wrap">
    <h1>Vue on Django, Part 1</h1>
    <p>I did it.  It was scary, and hard, and awesome, and I did it.  I‚Äôve been making server-side web applications with Django for a little while now, but I‚Äôve watched the shwoopy front-end, javascript-powered, single-page apps tentatively from afar, telling myself that I‚Äôll go through a few tutorials some day.  So last week, I said ‚ÄúScrew that noise, I‚Äôm building something!‚Äù  This is not how I traditionally learn anything, and this was the first time that I‚Äôve ever learned something from Level 0 by diving in the deep end.  I think it worked surprisingly well, and I wanted to share a tutorial ‚Äì mostly to help me cement the new ideas I‚Äôve learned into something more stable.  So without further ado, here‚Äôs my tutorial for making a Vue app powered by a Django REST backend.  In the first part, we‚Äôll set up just the Vue side.  Part 2 will be the hardest part, setting up the data model.  Finally, part 3 will be the Django backend.  The tutorial will assume a working knowledge of JavaScript syntax, but I‚Äôll try to explain some of the infrastructure involved.  Let‚Äôs get to it.</p>

<h2 id="overvue">1. OverVue</h2>

<p><a href="https://vuejs.org/">Vue.js</a> is another in a long line of front-end frameworks designed around a more realtime and pleasant user experience, with live-updating DOM elements and asynchronus server updates behind the scenes that happen without reloading the entire page the whole time.  I personally think they took some of the best things from React and Angular and Elm and others and combined them in a nice way.  At least, that‚Äôs my opinion with exactly one week of front-end framework experience under my belt.</p>

<h2 id="getting-set-up">2. Getting Set Up</h2>

<p>The way that we‚Äôre going to be doing this, we‚Äôll be using Webpack to handle module bundling and more.  Since Webpack is still essentially hoodoo sorcery to me, I‚Äôll explain enough to get the job done.  The first thing we‚Äôll need is the <code>vue-cli</code> tool.  This will make our lives nice by mostly setting up Webpack for us among other things.  You will need Node and NPM though.</p>

<blockquote>
  <p>For those of you more used to Python and Django, NPM is kind of like pip, if pip had some of the abilities of the standard Django manage.py.</p>
</blockquote>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>npm install -g vue-cli
...
<span class="nv">$ </span>vue init NdagiStanley/vue-django todoapp
...</code></pre></div>

<p>We are going to be using a template from Github for our vue project as you can tell from the command.  You can see it <a href="https://github.com/NdagiStanley/vue-django">here</a>.  Go through the prompt answering all the questions it asks.  When you‚Äôre done, you should have a new project folder.  We‚Äôll go over most of the stuff inside later, so don‚Äôt panic.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cd </span>todoapp
<span class="nv">$ </span>npm install</code></pre></div>

<p>At this point, feel free to begin your git repository as well.  I‚Äôll leave that to you.  Some important things now.  <code>main.js</code> is the file where your app is actually instantiated.  Vue apps are made up of components composed together to simplify complicated things.  We are not about to do complicated things, so no worries.  All we want to have is a todo list that you can enter items into and clear entirely.  Two actions.  The main component is already created and can be found in <code>src/App.vue</code>.  We‚Äôll be changing that shortly.  First create a directory called <code>components</code>, if it doesn‚Äôt already exist, within the <code>src</code> directory.  If it already exists, there may be a <code>Hello.vue</code> file.  You can delete that.</p>

<h2 id="the-components">3. The Components</h2>

<p>Our app will be three primary components.  1) The TodoList, which displays each todo.  2) The Todo, which will be the basic unit displayed.  3) The UserInput, which contains the input box and the clear button.  Does it need to be that complicated?  No.  But it will help show some of the functionalities available within Vue.  Let‚Äôs create our first one.  Create <code>src/components/Todo.vue</code>.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// src/components/Todo.vue</span>

<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span>
    <span class="p">{{</span> <span class="nx">todo</span><span class="p">.</span><span class="nx">text</span> <span class="p">}}</span>
  <span class="o">&lt;</span><span class="err">/p&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">props</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;todo&#39;</span><span class="p">]</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span></code></pre></div>

<p>That‚Äôs it.  There are two main ways to do Vue components: in one file, and with single-component modules.  We‚Äôre doing this via modules.  Each component will contain a template that lays out the HTML structure of the component, a script tag that contains the brains of the component, and optionally, a style tag that contains custom styles local to the component.  These components are laid out in a hierarchy, which you‚Äôll see, and parent components can pass data to their children in the form of <em>props</em>, which you have to declare for the component to be able to use them.  You can see that in the script tag above.  Don‚Äôt get too hung up on the <code>export default</code> nonsense.  That‚Äôs the way that Webpack is handling modules and imports.  When the Todo.vue module is imported, the object that it exports will be what is passed (essentially the ‚Äúsoul‚Äù of the component).  That will hopefully become more clear as we move on.  Let‚Äôs do the TodoList component so you can see how <code>props</code> are passed.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// src/components/TodoList.vue</span>

<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;todolist&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">v</span><span class="o">-</span><span class="k">for</span><span class="o">=</span><span class="s2">&quot;todo in todos&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">todo</span> <span class="nx">v</span><span class="o">-</span><span class="nx">bind</span><span class="o">:</span><span class="nx">todo</span><span class="o">=</span><span class="s2">&quot;todo&quot;</span> <span class="nx">v</span><span class="o">-</span><span class="nx">bind</span><span class="o">:</span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;todo.id&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="err">/todo&gt;</span>
      <span class="o">&lt;</span><span class="err">/li&gt;</span>
    <span class="o">&lt;</span><span class="err">/ul&gt;</span>
  <span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="kr">import</span> <span class="nx">Todo</span> <span class="nx">from</span> <span class="s1">&#39;./Todo.vue&#39;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Todo</span>
  <span class="p">},</span>
  <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">todos</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;Learn Vue&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;Do hard things&#39;</span> <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span></code></pre></div>

<p>Some things of note here.  You can see the <code>v-for</code> option used in the <code>li</code> element.  That tells Vue to loop through every item in the todos variable and create an li element from it.  You can see us creating our first custom element: <code>todo</code>.  <code>v-bind</code> allows us to send data into the child component as a prop.  When you are making a list of items, Vue makes you provide an id for each item so it can keep the list straight and make speedy changes.  You can see this component claims the Todo as its child component in the <code>script</code> section by including the <code>components</code> key.  Lastly, the <code>data</code> key provides the initialization of the variable todos.  Once we get into the data model we can initialize this from actual data as opposed to hard-coding values.</p>

<blockquote>
  <p>We‚Äôre also seeing more of the ‚Äúmodule‚Äù syntax in the <code>import Todo from './Todo.vue</code> line.  By writing this, the variable Todo is filled with the object that was exported from the Todo.vue file.  Similar, but a slightly more controlled import than Python imports, although you can achieve a similar effect by explicitly setting the <code>__all__</code> variable‚Ä¶ but I‚Äôm getting off-track.</p>
</blockquote>

<p>Here‚Äôs the UserInput component.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// src/components/UserInput.vue</span>

<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;user-inputs&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">v</span><span class="o">-</span><span class="nx">model</span><span class="o">=</span><span class="s2">&quot;newTodoText&quot;</span> <span class="nx">v</span><span class="o">-</span><span class="nx">on</span><span class="o">:</span><span class="nx">keyup</span><span class="p">.</span><span class="nx">enter</span><span class="o">=</span><span class="s2">&quot;createTodo&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">v</span><span class="o">-</span><span class="nx">on</span><span class="o">:</span><span class="nx">click</span><span class="o">=</span><span class="s2">&quot;clearTodos&quot;</span><span class="o">&gt;</span>
      <span class="nx">Clear</span>
    <span class="o">&lt;</span><span class="err">/button&gt;</span>
  <span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">newTodoText</span><span class="o">:</span> <span class="s1">&#39;&#39;</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">createTodo</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">newTodoText</span><span class="p">,</span> <span class="s1">&#39;created!&#39;</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">clearTodos</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Todos cleared!&#39;</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span></code></pre></div>

<p>What‚Äôs new here?  You can see our first event handlers!  The input responds to a <code>keyup.enter</code> event which does what is predictable.  You can see the <code>createTodo</code> method declared within the <code>script</code> tag‚Äôs method section.  Notice again we define a variable in the <code>data</code> section, but this time we‚Äôre using <code>v-model</code>, which is syntactic sugar for a two-way bind.  Anytime you change the input text, <code>newTodoText</code> gets updated, and anytime you change <code>newTodoText</code> programatically, the text in the input box gets changed.</p>

<p>Almost done.  Go ahead and modify the existing <code>App.vue</code>.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// src/App.vue</span>

<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;app&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">user</span><span class="o">-</span><span class="nx">input</span><span class="o">&gt;&lt;</span><span class="err">/user-input&gt;</span>
    <span class="o">&lt;</span><span class="nx">todo</span><span class="o">-</span><span class="nx">list</span><span class="o">&gt;&lt;</span><span class="err">/todo-list&gt;</span>
  <span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="err">/template&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="kr">import</span> <span class="nx">TodoList</span> <span class="nx">from</span> <span class="s1">&#39;./components/TodoList.vue&#39;</span>
<span class="kr">import</span> <span class="nx">UserInput</span> <span class="nx">from</span> <span class="s1">&#39;./components/UserInput.vue&#39;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">components</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">UserInput</span><span class="p">,</span>
    <span class="nx">TodoList</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span></code></pre></div>

<p>Nothing new to see here.  One thing I should note: see how the modules and objects in the <code>script</code> tag are CamelCase?  See how the template custom elements are kabob-case?  Vue manages that translation automatically since HTML is case-insensitive.</p>

<h2 id="take-a-look">4. Take a Look</h2>

<p>Here we go, the moment of truth!</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>npm run dev <span class="c"># This will run the webpack build and development server</span></code></pre></div>

<p>Head on over to <code>localhost:8080</code> and see your handiwork.  You should see the following masterpiece of software design:</p>

<p><img src="/img/todo-part1-final.png" alt="Our Todo List in the browser" /></p>

<p>Some possibilities for error: if you see <code>COULD NOT GET /</code>, you should check your terminal.  You probably angered the ESLint gods.  I had about 7 billion style fails the first time.  Fix those and refresh the page.  If you see any warning about npm failing, it‚Äôs possible you forgot to install the node_modules.  Run <code>npm install</code> and try again.</p>

<p>Once you get it working, pull up your browser‚Äôs devtools and type in the input and hit enter.  You should see it log as your <code>createTodo</code> function commands it to.  Click the clear button.  You should see a second appropriate log.  So ends the first whirlwind part of the tutorial.  Next time we‚Äôll get the data store (think Flux/Redux ‚Äì we‚Äôll be using Vue‚Äôs version: Vuex) setup.</p>

<p>As a note, this is my first time really using ES6-type syntax for the front-end, my first time using Vue, Webpack, ESLint, and my first time really using npm scripts and node_modules.  If you see any ways that I‚Äôm Doing It Wrong‚Ñ¢, let me know (gently, please üòÅ).</p>

    <small>
        
        <a href="/tags/vue/">vue</a>
        
        <a href="/tags/django/">django</a>
        
        <a href="/tags/es6/">es6</a>
        
        <a href="/tags/tutorial/">tutorial</a>
        
    </small>
</div>
        </div>

        <footer id="main-footer">
    <div class="container">
        <p class="text-muted">&copy; Ryan Palo 2017 | All things.  Phil. 4:13</p>
    </div>
</footer>
        <!-- Scripts -->
        <!--  
        jQuery (necessary for Bootstrap's JavaScript plugins)
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        Latest compiled and minified Bootstrap JavaScript
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        -->
        <!-- Custom Javascript -->
        <script src="/js/main.js"></script>
        
    </body>
</html>