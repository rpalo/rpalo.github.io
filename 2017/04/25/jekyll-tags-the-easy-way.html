<!DOCTYPE html>
<html lang="en">
    <head>
        
        <!-- Bootstrap Setup -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">-->
        
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/syntax.css">
        
        <title>assert_not magic?</title>
    </head>
    <body>
        
<nav id="main-nav">
    <a href="/" class="mobile-home">assert_not magic?</a>
    <ul>
        <li class="logo"><a href="/">assert_not magic?</a></li>
        <li><a href="/posts/">All Posts</a></li>
        <li><a href="/about/">About</a></li>
        <li><a href="/sketches/">Sketches</a></li>
        <li><a href="/todo/">To-Do</a></li>
    </ul>
</nav>
        <div class="container main">
                <article class="site-wrap">
    <h1>Jekyll Tags, the Easy Way</h1>
    <p>I was looking at my blog and trying to think of cool yet attainable things that I could add to it and experiment with.  I decided that I wanted to add tags to my posts – if nothing else, just to see what I was writing about.  I began my research and planning with the following requirements:</p>

<ol>
  <li>I must be able to add tags to each post that describe that post’s content.</li>
  <li>In theory, each post will display what it is tagged with.</li>
  <li>There should be a way of linking posts with the same tags together, or at least getting from one post with a tag to another one.</li>
  <li>The home page should have some kind of list of tags, tag ranking, tag cloud, etc.</li>
</ol>

<p>My blog is just a static site powered by Jekyll and Github Pages.  For more information on this, check out <a href="https://jekyllrb.com/">Jekyll’s homepage</a>.  I began my search with jekyll plugins.  I’ll admit that I didn’t look too hard, because I tend to succumb to “not-built-here” syndrome too often.  That being said, in the short time I did search, I didn’t see anything that would do exactly what I wanted.</p>

<p>Having some amount of comfortability with Jekyll’s templating language (powered by the <a href="https://shopify.github.io/liquid/">Liquid Templating Engine</a>), I decided, how hard could it be to do it on my own?  Turns out, Jekyll makes it pretty easy!</p>

<h2 id="adding-tags-to-each-post">1. Adding tags to each post</h2>

<p>This one is by far the easiest.  Every Jekyll post starts with some YAML frontmatter that the parser uses to build the site.  There are some built-in variables you can use (like “tags”, as it turns out), and you can define your own to be used within the post/page itself!  I only had to modify my frontmatter by one line.</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="nn">---</span>
<span class="l-Scalar-Plain">layout</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">page</span>
<span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Highly Original Example Title</span>
<span class="l-Scalar-Plain">tags</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">get some dope tags</span> <span class="c1"># Add this.  Separate via spaces or commas!</span>
<span class="nn">---</span></code></pre></div>

<h2 id="each-post-will-display-its-tags">2. Each post will display its tags</h2>

<p>Again, we are saved by Jekyll’s templating and built-in variables.  At the end of each post, I added the following html snippet.  You could probably be more creative than me.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;small&gt;</span>
    {% for tag in page.tags %}
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/tags/{{ tag }}/&quot;</span><span class="nt">&gt;</span>{{ tag }}<span class="nt">&lt;/a&gt;</span>
    {% endfor %}
<span class="nt">&lt;/small&gt;</span></code></pre></div>

<p>Here’s the result.</p>

<p><img src="/img/tag-snippet.png" alt="Screenshot of rendered tags html" /></p>

<p>Simple yet beautiful.</p>

<h2 id="there-should-be-a-way-to-group-posts-that-share-tags">3. There should be a way to group posts that share tags</h2>

<p>This one gets a bit harder and more involved.  I chose to solve this by making a page for each tag that simply lists the posts that have that tag.  The first step is to create a basic layout template.  Create the code below in <code>_layouts/tagpage.html</code>.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">---
layout: page # This template inherits from my basic page template
---
<span class="c">&lt;!-- We&#39;re going to give each page a tag when we create it.</span>
<span class="c">This will be the title --&gt;</span>
<span class="nt">&lt;h1&gt;</span>{{ page.tag | capitalize }}<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    {% for post in site.tags[page.tag] %}
    <span class="nt">&lt;li&gt;</span>
        {{ post.date | date: &quot;%B %d, %Y&quot; }}: <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ post.url }}&quot;</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
    {% endfor %}
<span class="nt">&lt;/ul&gt;</span></code></pre></div>

<p>Finally, in the main directory of your site, put a <code>/tags/</code> directory.  For each tag you have, you need to create a file.  One of the tags for this post is <code>jekyll</code>, so I have the following file <code>tags/jekyll.md</code>:</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="nn">---</span>
<span class="l-Scalar-Plain">layout</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">tagpage</span>
<span class="l-Scalar-Plain">tag</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">jekyll</span>
<span class="l-Scalar-Plain">permalink</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/tags/jekyll/</span> <span class="c1"># This is only required for pretty links.</span>
<span class="c1"># Thus, this page&#39;s link is /tags/jekyll/ rather than /tags/jekyll.html</span>
<span class="nn">---</span></code></pre></div>

<p>Now, when Jekyll builds, it will build a page for each of these tags, with a list of the posts for each one.  I’m working on a Jekyll plugin to have that tags folder get autogenerated based on the tags of each post.  Or maybe a hook into the Jekyll building process so I won’t even have to remember to type <code>jekyll tag</code>.  We’ll see.</p>

<h2 id="the-home-page-should-have-some-form-of-tag-cloud">4. The home page should have some form of tag cloud</h2>

<p>This last one requires some explaining.  Add the code below to your home page.  Have a glance at the html below before reading this next paragraph, so you’ll know what I’m talking about.  The <code>site.tags</code> variable that is available to you in Jekyll templates is an interesting structure.  If you access it like a dictionary (or dict, or hash, depending on your language of choice), – e.g. <code>site.tags["nematodes"]</code> – you will receive a list of the posts that have that tag.  If you loop through <code>site.tags</code> directly, each item can work as a tuple: (tag name, list of posts with this tag).  In the file below, you see both methods.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;p&gt;</span>
    {% for tag in site.tags %}
    <span class="c">&lt;!-- Here&#39;s a hack to generate a &quot;tag cloud&quot; where the size of</span>
<span class="c">    the word is directly proportional to the number of posts with</span>
<span class="c">    that tag. --&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/tags/{{ tag[0] }}/&quot;</span> 
    <span class="na">style=</span><span class="s">&quot;font-size: {{ tag[1] | size | times: 2 | plus: 10 }}px&quot;</span><span class="nt">&gt;</span>
        {{ tag[0] }} | 
    <span class="nt">&lt;/a&gt;</span>
    {% endfor %}
<span class="nt">&lt;/p&gt;</span></code></pre></div>

<p>Aaaand baboombah!</p>

<p><img src="/img/tag-cloud.png" alt="Rendering of the final tag cloud" /></p>

<p>As you can see, the list is unordered due to the fact that the <code>site.tags</code> variable is a dictionary, in which order isn’t guaranteed (unless you’re programming in Python 3 right now, where dictionaries are ordered by happy coincidence).  If you need them ordered, you’ll need to get slightly more complicated.</p>

<h2 id="roundup">Roundup</h2>

<p>My original search provided methods like this:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html">---
layout: default
title: Tag
---

{% comment %}
=======================
The following part extracts all the tags from your posts and sort tags,
 so that you do not need to manually collect your tags to a place.
=======================
{% endcomment %}
{% assign rawtags = &quot;&quot; %}
{% for post in site.posts %}
	{% assign ttags = post.tags | join:&#39;|&#39; | append:&#39;|&#39; %}
	{% assign rawtags = rawtags | append:ttags %}
{% endfor %}
{% assign rawtags = rawtags | split:&#39;|&#39; | sort %}

{% comment %}
=======================
The following part removes dulpicated tags and invalid tags like blank tag.
=======================
{% endcomment %}
{% assign tags = &quot;&quot; %}
{% for tag in rawtags %}
	{% if tag != &quot;&quot; %}
		{% if tags == &quot;&quot; %}
			{% assign tags = tag | split:&#39;|&#39; %}
		{% endif %}
		{% unless tags contains tag %}
			{% assign tags = tags | join:&#39;|&#39; | append:&#39;|&#39; | append:tag | split:&#39;|&#39; %}
		{% endunless %}
	{% endif %}
{% endfor %}</code></pre></div>

<p>The above snippet taken specifically from @codinfox.  You can find his blog <a href="https://codinfox.github.io/dev/2015/03/06/use-tags-and-categories-in-your-jekyll-based-github-pages/">here</a>.  It looks like it works and has a lot of bells and whistles.  I just wanted something simple and easy.  Have any ideas for improvement or neat/better layouts?  Let me know.  I am by no means what they call a “design-oriented” individual.  I can make things that function nicely, but pretty is something that I’ll have to find some good mentors to learn.</p>

    <small>
        
        <a href="/tags/ruby/">ruby</a>
        
        <a href="/tags/jekyll/">jekyll</a>
        
    </small>
</div>
        </div>

        <footer id="main-footer">
    <div class="container">
        <p class="text-muted">&copy; Ryan Palo 2017 | All things.  Phil. 4:13</p>
    </div>
</footer>
        <!-- Scripts -->
        <!--  
        jQuery (necessary for Bootstrap's JavaScript plugins)
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        Latest compiled and minified Bootstrap JavaScript
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        -->
        <!-- Custom Javascript -->
        <script src="/js/main.js"></script>
        
    </body>
</html>