<!DOCTYPE html>
<html lang="en">
    <head>
        
        <!-- Bootstrap Setup -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="ROBOTS" content="INDEX,FOLLOW">
        <meta name="description" content="">
        <meta name="keywords" content="blog, code, developer, programming, learning, teaching, dev, Ryan, Ryan Palo, git, workflow, best-practice, oss">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="assert_not magic? | Git Wrecked ‚Äî Keeping Your Branches Synced Without Breaking Things">
        <meta name="twitter:site" content="@paytastic">
        <meta name="twitter:description" content="">
        <meta name="twitter:image" content="http://assertnotmagic.com/img/git-wrecked.jpg">
        <meta name="twitter:creator" content="@paytastic">
        <meta name="og:url" content="http://assertnotmagic.com/2017/11/04/git-wrecked/">
        <meta name="og:title" content="assert_not magic? | Git Wrecked ‚Äî Keeping Your Branches Synced Without Breaking Things">
        <meta name="og:description" content="">
        <meta name="og:image" content="http://assertnotmagic.com/img/git-wrecked.jpg">

        <!-- Favicon settings -->
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/manifest.json">
        <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#222222">
        <meta name="theme-color" content="#ffffff">

        <!-- Omnisearch -->
        <link rel="search" type="application/opensearchdescription+xml" title="search assert_not magic" href="/opensearch.xml">
        
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
        
        <title>assert_not magic?</title>
    </head>
    <body>
        
<nav id="main-nav">
    <a href="/" class="mobile-home">assert_not magic?</a>
    <ul>
        <li class="logo"><a href="/">assert_not magic?</a></li>
        <li><a href="/posts/">All Posts</a></li>
        <li><a href="/about/">About</a></li>
        <li><a href="/sketches/">Sketches</a></li>
        <li><a href="/todo/">TODO</a></li>
        <li><a href="/uses/">Uses</a></li>
    </ul>
</nav>
        <div class="container main">
                <article class="site-wrap">
    <div id="cover">
        
        <img alt="Cover Image" class="cover-image" src="/img/git-wrecked.jpg">
        
    </div>
    <h1>Git Wrecked ‚Äî Keeping Your Branches Synced Without Breaking Things</h1>
    <p>Last month, I took part in Digital Ocean‚Äôs <a href="https://hacktoberfest.digitalocean.com/">Hacktoberfest</a> event, and it was awesome.  It helped give me the kick in the pants that I needed to get up the courage to contribute to Open Source Software.  It was definitely a great experience (and I got a t-shirt out of it üò¨).  With this really being my first time interacting with the <a href="https://www.atlassian.com/git/tutorials/comparing-workflows/forking-workflow">Forking Git Workflow</a>, I wasn‚Äôt exactly sure what to do.  I had seen snippets here and there about how you‚Äôre supposed to do it, but I wasn‚Äôt familiar enough with that <em>or</em> git commands other than the basic <code class="highlighter-rouge">push, pull, add, commit</code> commands needed for local/personal Git.  So I thought I‚Äôd share a story and what I learned.</p>

<h2 id="forking-gui">Forking GUI</h2>

<p>I was working on some additions to a README for this contribution.  I had already forked the repo, cloned a local version to my machine, created a branch for the fix, made some initial changes, pushed back to Github, and opened a pull request.  So far, so good.  I felt accomplished.</p>

<p><img src="/img/git-plan.gif" alt="I love it when a plan comes together" /></p>

<p>A couple days later, the maintainer got back to me with some thoughts and possible revisions.  Great!  This was real collaboration!  So exhilarating!  I headed back to my local repo, but I noticed that the original upstream repo had had some changes made to it.  Having heard that it was a good idea to keep your local repo and branches up to date, I decided to attempt to refresh everything‚Ä¶ but I didn‚Äôt really know how.  I looked around, but I got intimidated by the official git documentation.  That‚Äôs when I remembered that I had my handy-dandy git GUI application, <a href="https://www.gitkraken.com/">GitKraken</a>.  I opened it up, and in a couple of clicks, I had updated my <code class="highlighter-rouge">origin</code> and local branches, made the quick edits I was trying to make, and pushed everything up to GitHub.  Or so I thought.</p>

<p>That night I got a message from the maintainer, asking what these extra files were that I had added to my Pull Request.  To my horror, as I looked at the commit history of my GitHub repo, it was all jumbled up, and I had even included someone else‚Äôs commit from <code class="highlighter-rouge">upstream/master</code> in my pull request branch changes somehow.  I was very confused ‚Äî and mortified.  Not only had I bungled ‚Äúdoing the git‚Äù, but someone else (and possibly many someones) had seen me do it.</p>

<p><img src="/img/git-oh-no.png" alt="Oh no." /></p>

<p>Don‚Äôt get me wrong.  GitKraken is an amazing tool, very pretty, and very powerful.  I just think that I personally should only use it to inspect projects, and not use its editing functionality.  On the command line, when you type a git command, you know that you‚Äôre changing stuff and it‚Äôs a big deal.  In the GUI, they make it so easy to just click some buttons and do a lot of potentially dangerous things if you don‚Äôt already know what you‚Äôre doing, where I‚Äôm used to buttons in a GUI almost always being low-risk and undoable.  I definitely need the extra reflection time required to type out git commands.</p>

<p>But anyway, that leads me to the important part of this post:</p>

<h2 id="the-right-way">The Right Way‚Ñ¢</h2>

<p>The goal of this section is to lay out each step of the Forking Git Workflow, with the associated commands, in the correct manner (or, at least, one of the correct manners) so that future me can come back and read this when I inevitably forget.  I‚Äôm going to lay this out, but if you see anything that I‚Äôve done wrong or could do better, be sure to let me know and I‚Äôll try to keep this updated with the best practices you share.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># This is assuming you've already forked the Upstream Repo</span>
<span class="c"># on GitHub/BitBucket/GitLab/etc.</span>

<span class="c"># Clone to get an initial local copy.</span>
git clone &lt;url-to-your-fork&gt;

<span class="c"># Add a remote link to the upstream repo</span>
git remote add upstream &lt;url-to-upstream-repo&gt;

<span class="c"># Create a new branch for the feature/fix that you're doing</span>
git checkout -b &lt;new-branch-name&gt;

<span class="c"># Do some work, edit some files</span>
git add &lt;files&gt;
git commit -m &lt;your-commit-message&gt;
</code></pre>
</div>

<p>Oh no!  The <code class="highlighter-rouge">upstream</code> and/or your <code class="highlighter-rouge">origin/master</code> and/or your <code class="highlighter-rouge">origin/&lt;branch-name&gt;</code> had changes made to it that aren‚Äôt on your local machine.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># Inspect the changes made to origin</span>
git fetch origin

<span class="c"># Update your branch</span>
git merge origin/&lt;branch-name&gt;

<span class="c"># Update your master</span>
git checkout master
git merge origin/master

<span class="c"># Inspect the changes made to upstream</span>
git fetch upstream

<span class="c"># If you don't have any commits on master ahead of upstream,</span>
<span class="c"># you can just pull the upstream changes in</span>
git checkout master
git merge upstream/master

<span class="c"># If your master branch is ahead of upstream, you may want to rebase</span>
<span class="c"># In order to "work on top of" everyone else's changes, instead of merging</span>
git rebase upstream/master

<span class="c"># Now that your master branch is up to date, you can decide whether</span>
<span class="c"># or not you want to rebase your feature branch onto the new</span>
<span class="c"># tip of your master branch.  Generally a good idea.</span>
git checkout &lt;your-feature-branch&gt;
git rebase master

<span class="c"># OR, if you're about to submit a pull request and you  want to</span>
<span class="c"># clean up your commit history, do an interactive rebase and</span>
<span class="c"># squash and otherwise clean your commits/messages</span>
git rebase --interactive master

<span class="c"># Finally, push your updated branch</span>
git push -u origin &lt;your-feature-branch&gt;

<span class="c"># Sometimes, rebasing rewrites history, and pushing won't work.</span>
<span class="c"># Try --force-with-lease, which is the safe way to force the push</span>
<span class="c"># through.  More on that later</span>
git push origin &lt;your-feature-branch&gt; --force-with-lease

<span class="c"># Optionally, push everything to update your origin/master too</span>
git push origin --all
</code></pre>
</div>

<h2 id="what-is-git-rebase">What is Git Rebase</h2>

<p>Git Rebase confused me.  I don‚Äôt know that I can provide a better/more picture-laden explanation than the <a href="https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase">Atlassian Tutorial</a>.  Here‚Äôs the short version for the extra-lazy.</p>

<ol>
  <li>Your feature branch branched off of master at a certain point, called the ‚Äúbase‚Äù.</li>
  <li>Rebasing points this ‚Äúbase‚Äù to a new place, often moving it forward to the new head of another branch.</li>
  <li>During this process, you can reword commit messages, re-order commits, delete commits, and squash commits together.</li>
  <li>In general, you should never rebase something that is already pushed to a public place, <em>especially</em> if there‚Äôs a possibility that somebody else already began working on the things that your rebasing.  Try to rebase <em>only on your local system</em>.</li>
  <li>During the pull request progress, once you‚Äôve submitted the initial request, you‚Äôll be asked to update/modify your original pull-requested code, which will add mulitple commits to the pull request history.  You‚Äôll be tempted to squash these to keep the pull request looking pretty and concise.  <strong>Resist this urge.</strong>  After doing research, it seems like a) doing so would violate #4, and b) a pull request is supposed to be a forum/record of the discussion, and if you go rewriting things to hide all of the intermediate changes, nothing will make sense and you‚Äôll miss out on that history.</li>
  <li>Remote repositories don‚Äôt necessarily like this rewriting history.  Often, a simple <code class="highlighter-rouge">git push</code> will be rejected.  Doing a <code class="highlighter-rouge">git push --force</code> will force the remote repo to accept the push, but you probably shouldn‚Äôt be using <code class="highlighter-rouge">--force</code>.  The safe way is to use <code class="highlighter-rouge">--force-with-lease</code>, which only allows a force if it won‚Äôt mess anybody up.   Well, most of the time.  Read <a href="https://developer.atlassian.com/blog/2015/04/force-with-lease/">this post about ‚Äîforce-with-lease</a> and the dangers of fetching and pushing without first merging.</li>
</ol>

<h2 id="wrap-up">Wrap Up</h2>

<p>Like I said at the beginning, I‚Äôve been learning this workflow for the last two weeks, so I am by no means anything more than a beginner.  Hopefully this helps, and hopefully people smarter than me will let me know if I got anything wrong here.  Shoutout to the <a href="https://github.com/exercism/ruby/pull/760">Exercism Ruby Track team</a> that has been so patient with me as I bumble through my contributions.</p>

    <small>
        Author: Ryan Palo | Tags: 
        
        <a href="/tags/git/">git</a>
        
        <a href="/tags/workflow/">workflow</a>
        
        <a href="/tags/best-practice/">best-practice</a>
        
        <a href="/tags/oss/">oss</a>
        
    </small>

    <hr>

<!-- Footer for Homepage -->
  <div id="home-footer">
    <div id="left-home-footer">
      <!-- Featured Posts List -->
      <h2>Featured Posts</h2>
      <ul class="post-list">
        <li>
          <span class="post-meta">Jan 18, 2017</span><br />
          <a class="post-link" href="/2017/01/18/assert-not-magic/">Assert Not Magic</a>
        </li>
        
          <li>
            <span class="post-meta">Dec 29, 2017</span><br/>
            <a class="post-link" href="/2017/12/29/tap-and-yield-self/">Ruby 2.5 - Tap and Yield Self</a>
          </li>
        
          <li>
            <span class="post-meta">Dec 28, 2017</span><br/>
            <a class="post-link" href="/2017/12/28/p5-part-4-falling-in-love-with-vectors/">LTC4 - Falling in Love with Vectors</a>
          </li>
        
          <li>
            <span class="post-meta">Dec 13, 2017</span><br/>
            <a class="post-link" href="/2017/12/13/wishful-coding/">Wishful Coding</a>
          </li>
        
      </ul>
    </div>
    <div id="center-home-footer">
      <!-- Spacer -->
    </div>
    <div id="right-home-footer">
      <!-- Tags List -->
      <h2>Tags</h2>
      <p>
        
        <a href="/tags/python/" style="font-size: 54px">python | </a>
        
        <a href="/tags/django/" style="font-size: 22px">django | </a>
        
        <a href="/tags/rails/" style="font-size: 14px">rails | </a>
        
        <a href="/tags/algorithms/" style="font-size: 22px">algorithms | </a>
        
        <a href="/tags/editors/" style="font-size: 16px">editors | </a>
        
        <a href="/tags/emacs/" style="font-size: 16px">emacs | </a>
        
        <a href="/tags/ai/" style="font-size: 14px">ai | </a>
        
        <a href="/tags/r/" style="font-size: 14px">r | </a>
        
        <a href="/tags/tools/" style="font-size: 16px">tools | </a>
        
        <a href="/tags/javascript/" style="font-size: 24px">javascript | </a>
        
        <a href="/tags/not_magic/" style="font-size: 14px">not_magic | </a>
        
        <a href="/tags/soft-skills/" style="font-size: 22px">soft-skills | </a>
        
        <a href="/tags/tricks/" style="font-size: 32px">tricks | </a>
        
        <a href="/tags/vscode/" style="font-size: 14px">vscode | </a>
        
        <a href="/tags/vim/" style="font-size: 16px">vim | </a>
        
        <a href="/tags/sublime/" style="font-size: 14px">sublime | </a>
        
        <a href="/tags/puzzle/" style="font-size: 18px">puzzle | </a>
        
        <a href="/tags/bash/" style="font-size: 16px">bash | </a>
        
        <a href="/tags/math/" style="font-size: 16px">math | </a>
        
        <a href="/tags/teaching/" style="font-size: 16px">teaching | </a>
        
        <a href="/tags/ruby/" style="font-size: 28px">ruby | </a>
        
        <a href="/tags/jekyll/" style="font-size: 16px">jekyll | </a>
        
        <a href="/tags/git/" style="font-size: 18px">git | </a>
        
        <a href="/tags/physics/" style="font-size: 14px">physics | </a>
        
        <a href="/tags/fun/" style="font-size: 18px">fun | </a>
        
        <a href="/tags/scientific/" style="font-size: 14px">scientific | </a>
        
        <a href="/tags/pythonic/" style="font-size: 16px">pythonic | </a>
        
        <a href="/tags/functional/" style="font-size: 16px">functional | </a>
        
        <a href="/tags/vue/" style="font-size: 22px">vue | </a>
        
        <a href="/tags/es6/" style="font-size: 20px">es6 | </a>
        
        <a href="/tags/tutorial/" style="font-size: 32px">tutorial | </a>
        
        <a href="/tags/exercise/" style="font-size: 14px">exercise | </a>
        
        <a href="/tags/fitness/" style="font-size: 14px">fitness | </a>
        
        <a href="/tags/sysadmin/" style="font-size: 16px">sysadmin | </a>
        
        <a href="/tags/linux/" style="font-size: 14px">linux | </a>
        
        <a href="/tags/html/" style="font-size: 18px">html | </a>
        
        <a href="/tags/seo/" style="font-size: 14px">seo | </a>
        
        <a href="/tags/social/" style="font-size: 14px">social | </a>
        
        <a href="/tags/metaprogramming/" style="font-size: 14px">metaprogramming | </a>
        
        <a href="/tags/css/" style="font-size: 14px">css | </a>
        
        <a href="/tags/front-end/" style="font-size: 14px">front-end | </a>
        
        <a href="/tags/animations/" style="font-size: 14px">animations | </a>
        
        <a href="/tags/p5/" style="font-size: 20px">p5 | </a>
        
        <a href="/tags/beginner/" style="font-size: 20px">beginner | </a>
        
        <a href="/tags/encouragement/" style="font-size: 18px">encouragement | </a>
        
        <a href="/tags/not-magic/" style="font-size: 14px">not-magic | </a>
        
        <a href="/tags/screencast/" style="font-size: 14px">screencast | </a>
        
        <a href="/tags/showdev/" style="font-size: 14px">showdev | </a>
        
        <a href="/tags/interview/" style="font-size: 14px">interview | </a>
        
        <a href="/tags/performance/" style="font-size: 14px">performance | </a>
        
        <a href="/tags/editor/" style="font-size: 14px">editor | </a>
        
        <a href="/tags/workflow/" style="font-size: 14px">workflow | </a>
        
        <a href="/tags/best-practice/" style="font-size: 14px">best-practice | </a>
        
        <a href="/tags/oss/" style="font-size: 14px">oss | </a>
        
        <a href="/tags/static-site/" style="font-size: 14px">static-site | </a>
        
        <a href="/tags/big-o/" style="font-size: 14px">big-o | </a>
        
        <a href="/tags/linked-lists/" style="font-size: 14px">linked-lists | </a>
        
        <a href="/tags/design-intent/" style="font-size: 14px">design-intent | </a>
        
        <a href="/tags/struct/" style="font-size: 14px">struct | </a>
        
        <a href="/tags/browser/" style="font-size: 14px">browser | </a>
        
        <a href="/tags/focus/" style="font-size: 14px">focus | </a>
        
        <a href="/tags/productivity/" style="font-size: 14px">productivity | </a>
        
        <a href="/tags/codenewbie/" style="font-size: 14px">codenewbie | </a>
        
        <a href="/tags/reflection/" style="font-size: 14px">reflection | </a>
        
      </p>
    </div>
  </div>
  <hr>
  

  <p class="rss-subscribe contact">Like my stuff?  Have questions or feedback for me?  Want to mentor me or get my help with something?  <a href="/about/">Get in touch!</a>  To stay updated, subscribe <a href="/feed.xml">via RSS</a></p>



</article>
        </div>

        <footer id="main-footer">
    <div class="container">
        <p class="text-muted">&copy; Ryan Palo 2018 | All things.  Phil. 4:13</p>
    </div>
</footer>
        <!-- Scripts -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
        <script src="/js/main.js"></script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-91889165-1', 'auto');
            ga('send', 'pageview');

        </script>
        
    </body>
</html>