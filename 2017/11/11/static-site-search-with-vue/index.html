<!DOCTYPE html>
<html lang="en">
    <head>
        
        <!-- Bootstrap Setup -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="ROBOTS" content="INDEX,FOLLOW">
        <meta name="description" content="In 30 minutes or less!  With no build tools!">
        <meta name="keywords" content="blog, code, developer, programming, learning, teaching, dev, Ryan, Ryan Palo, vue, jekyll, static-site, tutorial">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="assert_not magic? | Add Search to Your Static Site with Vue">
        <meta name="twitter:site" content="@paytastic">
        <meta name="twitter:description" content="In 30 minutes or less!  With no build tools!">
        <meta name="twitter:image" content="http://assertnotmagic.com/img/search-cover.png">
        <meta name="twitter:creator" content="@paytastic">
        <meta name="og:url" content="http://assertnotmagic.com/2017/11/11/static-site-search-with-vue/">
        <meta name="og:title" content="assert_not magic? | Add Search to Your Static Site with Vue">
        <meta name="og:description" content="In 30 minutes or less!  With no build tools!">
        <meta name="og:image" content="http://assertnotmagic.com/img/search-cover.png">

        <!-- Favicon settings -->
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/manifest.json">
        <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#222222">
        <meta name="theme-color" content="#ffffff">

        <!-- Omnisearch -->
        <link rel="search" type="application/opensearchdescription+xml" title="search assert_not magic" href="/opensearch.xml">
        
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
        
        <link rel="stylesheet" href="/css/prism.css">
        <title>assert_not magic?</title>
    </head>
    <body>
        
<nav id="main-nav">
    <a href="/" class="mobile-home">assert_not magic?</a>
    <ul>
        <li class="logo"><a href="/">assert_not magic?</a></li>
        <li><a href="/posts/">All Posts</a></li>
        <li><a href="/about/">About Ryan</a></li>
        <li><a href="/sketches/">Sketches</a></li>
        <li><a href="/uses/">Uses</a></li>
    </ul>
</nav>
        <div class="container main">
                <article class="site-wrap">
    <div id="cover">
        
        <img alt="Cover Image" class="cover-image" src="/img/search-cover.png">
        
    </div>
    <h1>Add Search to Your Static Site with Vue</h1>
    <p>In the last update to my blog, I changed a few things, but one of the main ones was that I added a search bar to my list of posts to help people find topics that they were interested in.  I looked at a few solutions, but since I was already a little familiar with Vue, I decided to go with that.  So let’s get into it!</p>

<h2 id="the-goal">The Goal</h2>

<p>The goal of this project is to start with a static site, generated by some static site generator (in my case, Jekyll).  I’ll show the relevant HTML that will be our starting point.  We will then add search functionality to the Posts page, adding an input that, when typed into, will filter the results on the page, but without a page refresh.  Our goal is to get this done relatively simply.  JavaScript not being my native ecosystem, I want to try to avoid the complexity, setup, and disk space required to use build tools.  All of the code for my blog is open-source (insofar as the source is out in the open, on GitHub, for anyone to see), so if you want to follow along or cheat ahead and see the final code, you can <a href="https://github.com/rpalo/personal-blog">check out the repo</a>.  There’s probably some polishing that could be done on it, but that’s not what we’re talking about right now.</p>

<h2 id="0-the-starting-point">0. The Starting Point</h2>

<p>Here’s what we’ve got when starting.  You can assume that the main layout is in <code>_layouts/page.html</code> and everything that goes here just provides the contents for the posts page.</p>

<pre><code class="language-html">
---
layout: page
title: All Posts
permalink: /posts/
description: A list of all of my blog posts
---

&lt;!-- posts.html --&gt;

&lt;ul&gt;
    {% for post in site.posts %}
        &lt;li class="post"&gt;
            {% include post.html post=post %}
        &lt;/li&gt;
    {% endfor %}
&lt;/ul&gt;

</code></pre>

<p>You can see that there’s nothing exceedingly fancy here: an unordered list generated by looping through all the posts using liquid syntax.  It includes a snippet for each post.  Here is <code>_includes/post.html</code>.</p>

<pre><code class="language-html">
&lt;!-- _includes/post.html --&gt;

&lt;a class="post-title" href="{{ include.post.url }}"&gt;{{ include.post.title }}&lt;/a&gt;&lt;br&gt;
&lt;small&gt;{{ include.post.date | date: "%B %d, %Y" }}&lt;/small&gt;

{% if include.post.cover_image %}
    &lt;img class="img-small" alt="Cover image for {{ include.post.title }}" src="/img/{{ include.post.cover_image }}"&gt;
{% endif %}

&lt;small&gt;Tags: 
{% for tag in include.post.tags %}
    {{ tag }} 
{% endfor %}
&lt;/small&gt;

</code></pre>

<p>I broke my posts out in a component-like manner.  This snippet takes a <code>post</code> object and builds a listing, using its title, url, creation date, cover image (if available), and finally, its list of tags.  It ends up looking like this:</p>

<p><img src="/img/search-post.png" alt="Post shown rendered in the browser" /></p>

<p>That’s what we’re starting with.  Next we’ll add our dependency.</p>

<h2 id="1-adding-vue">1. Adding Vue</h2>

<p>Adding Vue will really only be one step long.  If you Google for Vue CDN, you’ll find this: <code>https://cdn.jsdelivr.net/npm/vue</code>.  Let’s add this to the bottom of our <code>posts.html</code> page, and that’s it!</p>

<pre><code class="language-html">
---
layout: page
title: All Posts
permalink: /posts/
description: A list of all of my blog posts
---

&lt;!-- posts.html --&gt;

&lt;ul&gt;
    {% for post in site.posts %}
        &lt;li class="post"&gt;
            {% include post.html post=post %}
        &lt;/li&gt;
    {% endfor %}
&lt;/ul&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/vue"&gt;&lt;/script&gt;

</code></pre>

<h2 id="2-getting-the-posts-data">2. Getting the Posts Data</h2>

<p>If we’re going to have Vue display our posts, we’re going to have to have a list of posts somewhere that Vue can see it (i.e. in JavaScript).  There are a couple of ways to do this.  We could generate a JSON file and read it in with JavaScript, we could generate it right into a JavaScript variable inside <code>script</code> tags, or we could generate it into a variable in a file.  There’s probably more ways, I went with putting it into its own JavaScript file.  Keep in mind that this file gets generated at Jekyll Build time, so the source isn’t going to be super pretty, and we’ll need the triple-dash YAML header lines to tell Jekyll to build it.</p>

<pre><code class="language-javascript">
---
---
// js/posts_data.js
  
const posts = [
  {% for post in site.posts %}
    {
      title: "{{ post.title | escape }}",
      url: "{{ site.baseurl }}{{ post.url }}",
      cover: "/img/{{ post.cover_image }}",
      tags: "{{ post.tags | join: ', ' }}",
      date: "{{ post.date | date: '%B %d, %Y' }}",
      description: "{{ post.description | strip_html | strip_newlines | escape }}"
    } {% unless forloop.last %},{% endunless %}
  {% endfor %}
];

</code></pre>

<p>We’ve created one variable that holds a list of our posts and all their relative information.  I’m not sure if it was really necessary to add the <code>unless</code> section around the comma, but that part makes it so that every post has a comma after it except the last one in the list.  This file will vary if you’re using another static site generator with a different templating language.  Let’s add that script to our script tags.</p>

<pre><code class="language-html">
---
layout: page
title: All Posts
permalink: /posts/
description: A list of all of my blog posts
---

&lt;!-- posts.html --&gt;

&lt;ul&gt;
    {% for post in site.posts %}
        &lt;li class="post"&gt;
            {% include post.html post=post %}
        &lt;/li&gt;
    {% endfor %}
&lt;/ul&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/vue"&gt;&lt;/script&gt;
&lt;script src="/js/posts_data.js"&gt;&lt;/script&gt;

</code></pre>

<p>Now we’re ready for the fun part.</p>

<h2 id="3-building-the-searchresults-page">3. Building the Search/Results Page</h2>

<p>It’s time to setup our HTML.  Replace the contents of <code>posts.html</code> with this:</p>

<pre><code class="language-html">
---
layout: page
title: All Posts
permalink: /posts/
description: A list of all of my blog posts
---
{% raw %}
&lt;div id="app"&gt;
  
  &lt;div class="search-wrapper"&gt;
    &lt;input class="search" type="text" name="search" v-model="search" placeholder="Search posts..."&gt;
  &lt;/div&gt;
  
  &lt;div class="results-wrapper"&gt;
    &lt;div class="post" v-for="post in filteredPosts"&gt;
      &lt;a class="post-title" v-bind:href="post.url"&gt;{{ post.title }}&lt;/a&gt;&lt;br&gt;
      &lt;small&gt;{{ post.date }}&lt;/small&gt;
      
      &lt;img class="img-small" alt="Cover image" v-bind:src="post.cover" v-if="post.cover"&gt;
      
      &lt;small&gt;Tags: {{ post.tags }}&lt;/small&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  
&lt;/div&gt;

{% endraw %}

&lt;script src="https://cdn.jsdelivr.net/npm/vue"&gt;&lt;/script&gt;
&lt;script src="/js/posts_data.js"&gt;&lt;/script&gt;
</code></pre>

<p>We have to add the <code>raw</code> tag because Vue coincidentally uses the same templating brackets that Jekyll does.  We create one <code>div</code> element to hold our app.  Inside of that lives our search input box and our results.  The contents of the results <code>div</code> should look familiar, since they were ported from our old <code>_includes/post.html</code>.  There are some Vue-specific things I want to cover.</p>

<p><code>&lt;input ... v-model="search"&gt;</code>: The <code>v-model</code> directive is a way of setting a 2-way binding in Vue.  When we write our App component, we’ll have a <code>search</code> variable available to us.  Whenever the search variable gets updated in JavaScript, the input will update, and vice versa too.</p>

<p><code>&lt;div class="post" v-for="post in filteredPosts"&gt;</code>: This directive tells Vue to loop through our posts and repeat the HTML inside for each post.</p>

<p><code>&lt;a ... v-bind:href="post.title"&gt;</code>: The <code>v-bind</code> directive is used to attach an HTML attribute directly to a JavaScript variable, since Vue template brackets won’t work inside HTML attributes.  You’ll see that we do the same thing again down at <code>&lt;img ... v-bind:src="post.cover"&gt;</code>.</p>

<p>Otherwise, we’re just referring to the attributes that we provided to our <code>posts</code> in <code>posts_data.js</code>!  Almost done!</p>

<h2 id="4-creating-the-app-component">4. Creating the App Component</h2>

<p>Time for some Vue JavaScript.  Create a file called <code>js/posts.js</code>.</p>

<pre><code class="language-javascript">const app = new Vue({
  el: '#app',
  data: {
    search: '',
    post_list: posts
  },
  computed: {
    filteredPosts() {
      return this.post_list.filter( post =&gt; {
        return `${post.tags} ${post.title}`.toLowerCase().includes(this.search.toLowerCase());
      });
    }
  }
});
</code></pre>

<p>Let’s talk about what’s here:</p>

<p><code>el: '#app'</code>: We tell Vue to place this component in the <code>&lt;div id="app"&gt;</code></p>

<p><code>data</code>: Here we create two variables — <code>search</code> is one that we saw in <code>posts.html</code> when we used the <code>v-model</code> directive.  Note that we give it an initial starting value of an empty string.  If we were to put anything here, that’s what text would show up in our search box when the page loaded.</p>

<p><code>filteredPosts()</code>:Vue uses <code>computed</code> to describe data that will need constantly recalculated based on variables.  Computed functions are read-only.  We’re using it to display a list of posts where either the title or tags match the text in the search box.  Anytime the search box gets changed, <code>filteredPosts</code> gets recalculated.  Since we’re referencing <code>filteredPosts</code> in our Vue HTML, anytime <code>filteredPosts</code> gets recalculated, the posts on the screen will get re-evaluated and redrawn as needed.</p>

<p>One last thing to do is to add this script to our <code>posts.html</code>.</p>

<pre><code class="language-html">// ...

&lt;script src="https://cdn.jsdelivr.net/npm/vue"&gt;&lt;/script&gt;
&lt;script src="/js/posts_data.js"&gt;&lt;/script&gt;
&lt;script src="/js/posts.js"&gt;&lt;/script&gt;
</code></pre>

<p>And that’s it!  We’re done!</p>

<p><img src="/img/search-final.gif" alt="The final result" /></p>

<h2 id="5-bonus-javascript">5. Bonus JavaScript</h2>

<p>As an added bonus, I added these few lines to the end of my <code>posts.js</code>:</p>

<pre><code class="language-javascript">document.querySelector('.search').addEventListener('focus', function () {
  window.scroll({
    top: this.offsetTop - 100,
    left: 0,
    behavior: 'smooth'
  });
});

</code></pre>

<p>Anytime somebody clicks into the search box (or touches into it on mobile), it raises the search bar up towards the top of the screen so it’s easier to see the available posts changing.</p>

<p><img src="/img/search-shwoop-top.gif" alt="Search bar raise to top demonstration" /></p>

<h2 id="wrap-up">Wrap Up</h2>

<p>That’s all!  A few file changes, less than 100 lines of code, and no build tools or <code>node_modules</code>, and our site — well, currently just my site — is looking snazzy.  Now yours can too!  Let me know how it goes or if you run into problems, or if there are ways I can improve my setup.  Thanks for reading!</p>

    
    <small>
        Author: Ryan Palo | Tags: 
        
        <a href="/tags/vue/">vue</a>
        
        <a href="/tags/jekyll/">jekyll</a>
        
        <a href="/tags/static-site/">static-site</a>
        
        <a href="/tags/tutorial/">tutorial</a>
        
    </small>
    
    <div class="email-background">
    <form class="email-signup" action="https://tinyletter.com/rpalo" method="post" target="popupwindow"
    onsubmit="window.open('https://tinyletter.com/rpalo', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
      <p>
        <label class="email-text" for="tlemail">Want to stay connected and get my newsletter?</label>
      </p>
      <p>
        <input class="email-input" type="text" name="email" id="tlemail" />
        <input type="hidden" value="1" name="embed" />
        <input class="email-button" type="submit" value="Subscribe" />
      </p>

        <a class="email-powered" href="https://tinyletter.com" target="_blank">powered by TinyLetter</a>
      </p>
    </form>
</div>
    <hr>

<!-- Footer for Homepage -->
  <div id="home-footer">
    <div id="left-home-footer">
      <!-- Featured Posts List -->
      <h2>Featured Posts</h2>
      <ul class="post-list">
        <li>
          <span class="post-meta">Jan 18, 2017</span><br />
          <a class="post-link" href="/2017/01/18/assert-not-magic/">Assert Not Magic</a>
        </li>
        
          <li>
            <span class="post-meta">Apr 28, 2018</span><br/>
            <a class="post-link" href="/2018/04/28/powershell-tutorial/">PowerShell Tutorial (Especially for People Who Hate PowerShell)</a>
          </li>
        
          <li>
            <span class="post-meta">Apr 26, 2018</span><br/>
            <a class="post-link" href="/2018/04/26/keep-vs-code-light/">Keep VS Code from Becoming an IDE</a>
          </li>
        
          <li>
            <span class="post-meta">Apr 22, 2018</span><br/>
            <a class="post-link" href="/2018/04/22/ruby-singleton-classes/">Ruby Concepts - Singleton Classes</a>
          </li>
        
      </ul>
    </div>
    <div id="center-home-footer">
      <!-- Spacer -->
    </div>
    <div id="right-home-footer">
      <!-- Tags List -->
      <h2>Tags</h2>
      <p>
        
        <a href="/tags/python/" style="font-size: 60px">python | </a>
        
        <a href="/tags/django/" style="font-size: 22px">django | </a>
        
        <a href="/tags/rails/" style="font-size: 14px">rails | </a>
        
        <a href="/tags/algorithms/" style="font-size: 22px">algorithms | </a>
        
        <a href="/tags/editors/" style="font-size: 20px">editors | </a>
        
        <a href="/tags/emacs/" style="font-size: 16px">emacs | </a>
        
        <a href="/tags/ai/" style="font-size: 14px">ai | </a>
        
        <a href="/tags/r/" style="font-size: 14px">r | </a>
        
        <a href="/tags/tools/" style="font-size: 16px">tools | </a>
        
        <a href="/tags/javascript/" style="font-size: 26px">javascript | </a>
        
        <a href="/tags/not-magic/" style="font-size: 16px">not-magic | </a>
        
        <a href="/tags/soft-skills/" style="font-size: 22px">soft-skills | </a>
        
        <a href="/tags/tricks/" style="font-size: 38px">tricks | </a>
        
        <a href="/tags/vscode/" style="font-size: 16px">vscode | </a>
        
        <a href="/tags/vim/" style="font-size: 18px">vim | </a>
        
        <a href="/tags/sublime/" style="font-size: 14px">sublime | </a>
        
        <a href="/tags/puzzle/" style="font-size: 20px">puzzle | </a>
        
        <a href="/tags/bash/" style="font-size: 18px">bash | </a>
        
        <a href="/tags/math/" style="font-size: 16px">math | </a>
        
        <a href="/tags/teaching/" style="font-size: 16px">teaching | </a>
        
        <a href="/tags/ruby/" style="font-size: 32px">ruby | </a>
        
        <a href="/tags/jekyll/" style="font-size: 16px">jekyll | </a>
        
        <a href="/tags/git/" style="font-size: 20px">git | </a>
        
        <a href="/tags/physics/" style="font-size: 14px">physics | </a>
        
        <a href="/tags/fun/" style="font-size: 18px">fun | </a>
        
        <a href="/tags/scientific/" style="font-size: 16px">scientific | </a>
        
        <a href="/tags/pythonic/" style="font-size: 16px">pythonic | </a>
        
        <a href="/tags/functional/" style="font-size: 20px">functional | </a>
        
        <a href="/tags/vue/" style="font-size: 22px">vue | </a>
        
        <a href="/tags/es6/" style="font-size: 20px">es6 | </a>
        
        <a href="/tags/tutorial/" style="font-size: 36px">tutorial | </a>
        
        <a href="/tags/exercise/" style="font-size: 14px">exercise | </a>
        
        <a href="/tags/fitness/" style="font-size: 14px">fitness | </a>
        
        <a href="/tags/sysadmin/" style="font-size: 18px">sysadmin | </a>
        
        <a href="/tags/linux/" style="font-size: 16px">linux | </a>
        
        <a href="/tags/html/" style="font-size: 18px">html | </a>
        
        <a href="/tags/seo/" style="font-size: 14px">seo | </a>
        
        <a href="/tags/social/" style="font-size: 14px">social | </a>
        
        <a href="/tags/metaprogramming/" style="font-size: 14px">metaprogramming | </a>
        
        <a href="/tags/css/" style="font-size: 14px">css | </a>
        
        <a href="/tags/front-end/" style="font-size: 16px">front-end | </a>
        
        <a href="/tags/animations/" style="font-size: 14px">animations | </a>
        
        <a href="/tags/p5/" style="font-size: 20px">p5 | </a>
        
        <a href="/tags/beginner/" style="font-size: 20px">beginner | </a>
        
        <a href="/tags/encouragement/" style="font-size: 18px">encouragement | </a>
        
        <a href="/tags/screencast/" style="font-size: 14px">screencast | </a>
        
        <a href="/tags/showdev/" style="font-size: 14px">showdev | </a>
        
        <a href="/tags/interview/" style="font-size: 14px">interview | </a>
        
        <a href="/tags/performance/" style="font-size: 16px">performance | </a>
        
        <a href="/tags/workflow/" style="font-size: 14px">workflow | </a>
        
        <a href="/tags/best-practice/" style="font-size: 14px">best-practice | </a>
        
        <a href="/tags/oss/" style="font-size: 14px">oss | </a>
        
        <a href="/tags/static-site/" style="font-size: 14px">static-site | </a>
        
        <a href="/tags/big-o/" style="font-size: 14px">big-o | </a>
        
        <a href="/tags/linked-lists/" style="font-size: 14px">linked-lists | </a>
        
        <a href="/tags/design-intent/" style="font-size: 14px">design-intent | </a>
        
        <a href="/tags/struct/" style="font-size: 14px">struct | </a>
        
        <a href="/tags/browser/" style="font-size: 14px">browser | </a>
        
        <a href="/tags/focus/" style="font-size: 14px">focus | </a>
        
        <a href="/tags/productivity/" style="font-size: 18px">productivity | </a>
        
        <a href="/tags/codenewbie/" style="font-size: 14px">codenewbie | </a>
        
        <a href="/tags/reflection/" style="font-size: 14px">reflection | </a>
        
        <a href="/tags/update/" style="font-size: 14px">update | </a>
        
        <a href="/tags/preview/" style="font-size: 14px">preview | </a>
        
        <a href="/tags/gtd/" style="font-size: 14px">gtd | </a>
        
        <a href="/tags/bullet-journal/" style="font-size: 14px">bullet-journal | </a>
        
        <a href="/tags/data-science/" style="font-size: 14px">data-science | </a>
        
        <a href="/tags/singleton/" style="font-size: 14px">singleton | </a>
        
        <a href="/tags/basics/" style="font-size: 14px">basics | </a>
        
        <a href="/tags/powershell/" style="font-size: 14px">powershell | </a>
        
        <a href="/tags/terminal/" style="font-size: 14px">terminal | </a>
        
        <a href="/tags/security/" style="font-size: 14px">security | </a>
        
      </p>
    </div>
  </div>
  <hr>
  

  <p class="rss-subscribe contact">Like my stuff?  Have questions or feedback for me?  Want to mentor me or get my help with something?  <a href="/about/">Get in touch!</a>  To stay updated, subscribe <a href="/feed.xml">via RSS</a></p>



</article>
        </div>

        <footer id="main-footer">
    <div class="container">
        <p class="text-muted">&copy; Ryan Palo 2018 | All things.  Phil. 4:13</p>
    </div>
</footer>
        <!-- Scripts -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
        <script src="/js/main.js"></script>
        <script src="/js/prism.js"></script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-91889165-1', 'auto');
            ga('send', 'pageview');

        </script>
        
    </body>
</html>