<!DOCTYPE html>
<html lang="en">
    <head>
        
        <!-- Bootstrap Setup -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Custom meta -->
        <meta name="ROBOTS" content="INDEX,FOLLOW">
        <meta name="description" content="Ryan Palo's personal blog, documenting my progress while learning to program.  Hopefully it is a useful resource to help other developers learn, too!">
        <meta name="keywords" content="blog, code, developer, programming, learning, teaching, python, django, dev, Ryan, Ryan Palo">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="assert_not magic?">
        <meta name="twitter:site" content="@paytastic">
        <meta name="twitter:description" content="Ryan Palo's programming blog">
        <meta name="twitter:image" content="https://assertnotmagic.com/img/twitter-card.png">
        <meta name="twitter:creator" content="@paytastic">
        <meta name="og:url" content="https://assertnotmagic.com">
        <meta name="og:title" content="assert_not magic?">
        <meta name="og:description" content="Ryan Palo's programming blog">
        <meta name="og:image" content="https://assertnotmagic.com/img/twitter-card.png">

        <!-- Favicon settings -->
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="/manifest.json">
        <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#222222">
        <meta name="theme-color" content="#ffffff">

        <!-- Omnisearch -->
        <link rel="search" type="application/opensearchdescription+xml" title="search assert_not magic" href="/opensearch.xml">
        
        
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/home.css">
        
        <title>assert_not magic?</title>
    </head>
    <body>
        <header id="main-header">
    <h1>assert_not magic?</h1>
    <img class="profile" alt="Ryan Palo" src="/img/me.jpg" />
    <div class="magic-code highlight">
        <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">        <span class="k">def</span> <span class="nf">test_code_isnt_magic</span>
          <span class="n">code</span> <span class="o">=</span> <span class="p">[</span><span class="ss">:ruby</span><span class="p">,</span> <span class="ss">:python</span><span class="p">,</span> <span class="ss">:javascript</span><span class="p">,</span> <span class="ss">:html</span><span class="p">,</span> <span class="ss">:css</span><span class="p">,</span> <span class="ss">:bash</span><span class="p">]</span>
          <span class="n">assert_not</span> <span class="n">code</span><span class="p">.</span><span class="nf">any?</span> <span class="p">{</span> <span class="o">|</span><span class="n">language</span><span class="o">|</span> <span class="n">language</span><span class="p">.</span><span class="nf">magic?</span> <span class="p">}</span>
        <span class="k">end</span>

        <span class="c1"># A programming blog by Ryan Palo</span>
        </code></pre></figure>
    </div>
    <img class="down-arrow" alt="Scroll down..." src="/img/down.png">
</header>
        
<nav id="main-nav">
    <a href="/" class="mobile-home">assert_not magic?</a>
    <ul>
        <li class="logo"><a href="/">assert_not magic?</a></li>
        <li><a href="/posts/">All Posts</a></li>
        <li><a href="/about/">About Ryan</a></li>
        <li><a href="/sketches/">Sketches</a></li>
        <li><a href="/uses/">Uses</a></li>
    </ul>
</nav>
        <div class="container main">
          <article class="site-wrap">
            <div class="home">

  <!-- Current Post -->
  
    <h1 id="title">Vim Filters</h1>
    <small>Mar 18, 2018</small>
    <p><p>Quick tip time!  Let’s talk about Vim filters.  This is a way to execute any external command and pipe the results into your current buffer.  This is a great way to get the power of your shell into vim without having to learn much VimScript.  Here are the basics:</p>

<h2 id="reading-command-input-into-the-current-buffer">Reading command input into the current buffer</h2>

<p>This is the simplest method:</p>

<div class="language-vimscript highlighter-rouge"><pre class="highlight"><code><span class="p">:</span><span class="k">r</span> <span class="p">!</span><span class="k">ls</span>
</code></pre>
</div>

<p>This command will read the results of <code class="highlighter-rouge">ls</code> into your buffer at your cursor location.  You can also specify the specific line to insert after.  The next command will read the results of the <code class="highlighter-rouge">ls</code> command into your current buffer after line 4.</p>

<div class="language-vimscript highlighter-rouge"><pre class="highlight"><code><span class="p">:</span><span class="m">4</span><span class="k">r</span> <span class="p">!</span><span class="k">ls</span>
</code></pre>
</div>

<h2 id="sending-buffer-contents-as-input-to-an-external-command">Sending buffer contents as input to an external command</h2>

<p>You can also send lines of your buffer out to be replaced with the results of the command.  A common thing to do is to operate on the whole buffer you’re working on.</p>

<div class="language-vimscript highlighter-rouge"><pre class="highlight"><code><span class="p">:</span>%<span class="p">!</span><span class="k">sort</span>
</code></pre>
</div>

<p>The <code class="highlighter-rouge">%</code> selects the whole buffer, and then the <code class="highlighter-rouge">!</code> sends the selected lines out to the external <code class="highlighter-rouge">sort</code> command.  The whole buffer contents will be replaced with the results of the command.</p>

<p>For example.  Let’s say you’re working on a text file.</p>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code><span class="gh"># Attention, Everyone!</span>

This markdown file contains some <span class="gs">**pretty interesting**</span> stuff.

I __mean__ it.
</code></pre>
</div>

<p>But something’s just not quite there.  It needs some more zoom – some more whammy!  Try combining it with a <a href="https://assertnotmagic.com/2017/10/05/smooth-one-liners/">slick Ruby one liner!</a></p>

<div class="language-vimscript highlighter-rouge"><pre class="highlight"><code><span class="p">:</span>%<span class="p">!</span><span class="k">ruby</span> <span class="p">-</span><span class="k">ne</span> <span class="s1">'puts $_.upcase'</span>
</code></pre>
</div>

<p>And suddenly, the contents of your buffer is:</p>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code><span class="gh"># ATTENTION, EVERYONE</span>

THIS MARKDOWN FILE CONTAINS SOME <span class="gs">**PRETTY INTERESTING**</span> STUFF.

I __MEAN__ IT.
</code></pre>
</div>

<p>This will work with any command.  You can use shell commands, or you can run it through a Python or Node script.  It gives you the power to select the best (or your favorite) tool for the job, instead of locking you into Vim’s capabilities alone.  And you can use other motions if you just want to replace a portion of your buffer.</p>

<div class="language-vimscript highlighter-rouge"><pre class="highlight"><code><span class="p">:!!</span><span class="k">ruby</span> <span class="p">-</span><span class="k">ne</span> <span class="s1">'puts $_.upcase'</span>
</code></pre>
</div>

<p>Two exclamation points will operate on the current line.</p>

<p>It also works on visually selected lines.  Select a couple lines in visual mode:</p>

<div class="language-vimscript highlighter-rouge"><pre class="highlight"><code><span class="k">v</span>         " Visual <span class="k">mode</span> activated
jj        " Select next two lines
<span class="p">:!</span><span class="k">sort</span>    " Sorts the lines that were selected<span class="p">.</span>
</code></pre>
</div>

<p><em>Protip: If you accidentally run a command and blow away your file somehow, don’t panic.  Simply press <code class="highlighter-rouge">u</code> in Normal mode to undo the operation.</em></p>

<p>Hope this comes in handy!</p>
</p>
  

  <hr>

<!-- Footer for Homepage -->
  <div id="home-footer">
    <div id="left-home-footer">
      <!-- Featured Posts List -->
      <h2>Featured Posts</h2>
      <ul class="post-list">
        <li>
          <span class="post-meta">Jan 18, 2017</span><br />
          <a class="post-link" href="/2017/01/18/assert-not-magic/">Assert Not Magic</a>
        </li>
        
          <li>
            <span class="post-meta">Mar 8, 2018</span><br/>
            <a class="post-link" href="/2018/03/08/publish-directories-to-github-pages/">Publish Single Directories to Another Branch</a>
          </li>
        
          <li>
            <span class="post-meta">Mar 1, 2018</span><br/>
            <a class="post-link" href="/2018/03/01/closures-and-callbacks/">Closures and Callbacks</a>
          </li>
        
          <li>
            <span class="post-meta">Feb 19, 2018</span><br/>
            <a class="post-link" href="/2018/02/19/getting-things-done/">Getting Things Done - A Programmer Productivity Guide</a>
          </li>
        
      </ul>
    </div>
    <div id="center-home-footer">
      <!-- Spacer -->
    </div>
    <div id="right-home-footer">
      <!-- Tags List -->
      <h2>Tags</h2>
      <p>
        
        <a href="/tags/python/" style="font-size: 56px">python | </a>
        
        <a href="/tags/django/" style="font-size: 22px">django | </a>
        
        <a href="/tags/rails/" style="font-size: 14px">rails | </a>
        
        <a href="/tags/algorithms/" style="font-size: 22px">algorithms | </a>
        
        <a href="/tags/editors/" style="font-size: 18px">editors | </a>
        
        <a href="/tags/emacs/" style="font-size: 16px">emacs | </a>
        
        <a href="/tags/ai/" style="font-size: 14px">ai | </a>
        
        <a href="/tags/r/" style="font-size: 14px">r | </a>
        
        <a href="/tags/tools/" style="font-size: 16px">tools | </a>
        
        <a href="/tags/javascript/" style="font-size: 26px">javascript | </a>
        
        <a href="/tags/not-magic/" style="font-size: 16px">not-magic | </a>
        
        <a href="/tags/soft-skills/" style="font-size: 22px">soft-skills | </a>
        
        <a href="/tags/tricks/" style="font-size: 36px">tricks | </a>
        
        <a href="/tags/vscode/" style="font-size: 14px">vscode | </a>
        
        <a href="/tags/vim/" style="font-size: 18px">vim | </a>
        
        <a href="/tags/sublime/" style="font-size: 14px">sublime | </a>
        
        <a href="/tags/puzzle/" style="font-size: 20px">puzzle | </a>
        
        <a href="/tags/bash/" style="font-size: 16px">bash | </a>
        
        <a href="/tags/math/" style="font-size: 16px">math | </a>
        
        <a href="/tags/teaching/" style="font-size: 16px">teaching | </a>
        
        <a href="/tags/ruby/" style="font-size: 30px">ruby | </a>
        
        <a href="/tags/jekyll/" style="font-size: 16px">jekyll | </a>
        
        <a href="/tags/git/" style="font-size: 20px">git | </a>
        
        <a href="/tags/physics/" style="font-size: 14px">physics | </a>
        
        <a href="/tags/fun/" style="font-size: 18px">fun | </a>
        
        <a href="/tags/scientific/" style="font-size: 14px">scientific | </a>
        
        <a href="/tags/pythonic/" style="font-size: 16px">pythonic | </a>
        
        <a href="/tags/functional/" style="font-size: 20px">functional | </a>
        
        <a href="/tags/vue/" style="font-size: 22px">vue | </a>
        
        <a href="/tags/es6/" style="font-size: 20px">es6 | </a>
        
        <a href="/tags/tutorial/" style="font-size: 32px">tutorial | </a>
        
        <a href="/tags/exercise/" style="font-size: 14px">exercise | </a>
        
        <a href="/tags/fitness/" style="font-size: 14px">fitness | </a>
        
        <a href="/tags/sysadmin/" style="font-size: 16px">sysadmin | </a>
        
        <a href="/tags/linux/" style="font-size: 14px">linux | </a>
        
        <a href="/tags/html/" style="font-size: 18px">html | </a>
        
        <a href="/tags/seo/" style="font-size: 14px">seo | </a>
        
        <a href="/tags/social/" style="font-size: 14px">social | </a>
        
        <a href="/tags/metaprogramming/" style="font-size: 14px">metaprogramming | </a>
        
        <a href="/tags/css/" style="font-size: 14px">css | </a>
        
        <a href="/tags/front-end/" style="font-size: 16px">front-end | </a>
        
        <a href="/tags/animations/" style="font-size: 14px">animations | </a>
        
        <a href="/tags/p5/" style="font-size: 20px">p5 | </a>
        
        <a href="/tags/beginner/" style="font-size: 20px">beginner | </a>
        
        <a href="/tags/encouragement/" style="font-size: 18px">encouragement | </a>
        
        <a href="/tags/screencast/" style="font-size: 14px">screencast | </a>
        
        <a href="/tags/showdev/" style="font-size: 14px">showdev | </a>
        
        <a href="/tags/interview/" style="font-size: 14px">interview | </a>
        
        <a href="/tags/performance/" style="font-size: 16px">performance | </a>
        
        <a href="/tags/workflow/" style="font-size: 14px">workflow | </a>
        
        <a href="/tags/best-practice/" style="font-size: 14px">best-practice | </a>
        
        <a href="/tags/oss/" style="font-size: 14px">oss | </a>
        
        <a href="/tags/static-site/" style="font-size: 14px">static-site | </a>
        
        <a href="/tags/big-o/" style="font-size: 14px">big-o | </a>
        
        <a href="/tags/linked-lists/" style="font-size: 14px">linked-lists | </a>
        
        <a href="/tags/design-intent/" style="font-size: 14px">design-intent | </a>
        
        <a href="/tags/struct/" style="font-size: 14px">struct | </a>
        
        <a href="/tags/browser/" style="font-size: 14px">browser | </a>
        
        <a href="/tags/focus/" style="font-size: 14px">focus | </a>
        
        <a href="/tags/productivity/" style="font-size: 16px">productivity | </a>
        
        <a href="/tags/codenewbie/" style="font-size: 14px">codenewbie | </a>
        
        <a href="/tags/reflection/" style="font-size: 14px">reflection | </a>
        
        <a href="/tags/update/" style="font-size: 14px">update | </a>
        
        <a href="/tags/preview/" style="font-size: 14px">preview | </a>
        
        <a href="/tags/gtd/" style="font-size: 14px">gtd | </a>
        
      </p>
    </div>
  </div>
  <hr>
  

  <p class="rss-subscribe contact">Like my stuff?  Have questions or feedback for me?  Want to mentor me or get my help with something?  <a href="/about/">Get in touch!</a>  To stay updated, subscribe <a href="/feed.xml">via RSS</a></p>



</div>

          </article>
        </div>

        <footer id="main-footer">
    <div class="container">
        <p class="text-muted">&copy; Ryan Palo 2018 | All things.  Phil. 4:13</p>
    </div>
</footer>
        
        <!-- Custom Javascript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
        <script src="/js/home.js"></script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          
            ga('create', 'UA-91889165-1', 'auto');
            ga('send', 'pageview');
          
          </script>
    </body>
</html>
