<!DOCTYPE html>
<html lang="en">
    <head>
        
        <!-- Bootstrap Setup -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">-->
        
        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/home.css">
        <link rel="stylesheet" href="/css/syntax.css">
        
        <title>assert_not magic?</title>
    </head>
    <body>
        <header id="main-header">
    <h1>assert_not magic?</h1>
    <img class="profile" alt="Ryan Palo" src="/img/me.jpg" />
</header>
        
<nav id="main-nav">
    <a href="/" class="mobile-home">assert_not magic?</a>
    <ul>
        <li class="logo"><a href="/">assert_not magic?</a></li>
        <li><a href="/posts/">All Posts</a></li>
        <li><a href="/about/">About</a></li>
        <li><a href="/sketches/">Sketches</a></li>
        <li><a href="/todo/">To-Do</a></li>
    </ul>
</nav>
        <div class="container main">
          <article class="site-wrap">
            <div class="home">

  <!-- Current Post -->
  
    <h1>Douglas Adams's Whale</h2>
    <small>May 14, 2017</small>
    <p><h2 id="intro">Intro</h2>

<p>I think it is important to find ways that your background or experience specifically help you to stand out in any given group.  If you can pinpoint those areas, the group can optimize its tool set and have a better idea of who would be best suited to a specific task.  Personally, while programming is one of my favorite pastimes, I have a degree in Mechanical Engineering and some experience teaching Calculus and Physics.  Because of this, I thought I would share some insight into an area that I know everyone has some questions about: the whale in Douglas Adams’s <em>Hitchhiker’s Guide to the Galaxy</em>.</p>

<p>What whale, you ask?  In chapter 18, two missiles get randomly transformed into a whale and a potted plant, respectively.  Here’s the excerpt:</p>

<blockquote>
  <p>Another thing that got forgotten was the fact that against all probability a sperm whale had suddenly been called into existence several miles above the surface of an alien planet.<br />
And since this is not a naturally tenable position for a whale, this poor innocent creature had very little time to come to terms with its identity as a whale before it then had to come to terms with not being a whale any more.<br />
This is a complete record of its thoughts from the moment it began its life till the moment it ended it.<br />
Ah … ! What’s happening? it thought.<br />
[…]<br />
And wow! Hey! What’s this thing suddenly coming towards me very fast? Very very fast. So big and flat and round, it needs a big wide sounding name like … ow … ound … round … ground! That’s it! That’s a good name – ground!<br />
I wonder if it will be friends with me?<br />
And the rest, after a sudden wet thud, was silence.</p>
</blockquote>

<p>This excerpt leads me to ask: can we simulate it?  With a little help from Python, we can find out.  I’m going to write this assuming the reader has a working knowledge of basic programming principles and what the difference between the Imperial and Metric system are, but has very little physics background beyond that.  Although I’m generally more comfortable using Imperial units like feet and pounds, I’m going to stick to metric units this time, for the sanity of our international friends and because the math works out a little easier.</p>

<h2 id="the-forces-involved">The Forces Involved</h2>

<p>Let’s start with the forces at play here.  Basically, the only two I’m going to worry about are gravity acting on the whale and drag working against the whale as it falls.  Let’s assume this whale is falling from a geosynchronus orbit (orbit in space that would allow it to keep pace as the earth rotates) – approximately <a href="https://en.wikipedia.org/wiki/Geostationary_orbit">3.5786 x 10^7 meters elevation</a>.  For those that are interested, I’m going to plop the only real in-depth equation here.</p>

<p><img src="/img/whale-sketch.jpg" alt="Sketch of Forces" /></p>

<p>Turning the equations into code isn’t super difficult.  We just need to fill in some of the variables above first.  Since getting data on an alien planet and alien whale is more difficult, let’s use Earth and an Earthly Blue Whale.  The mass of the earth is roughly <a href="https://en.wikipedia.org/wiki/Earth">5.97 x 10^24 kg</a>, and its radius is approximately <a href="https://en.wikipedia.org/wiki/Earth">6.37 million meters</a>.  Blue whales live in the region between about <a href="https://en.wikipedia.org/wiki/Blue_whale">80-120 metric tons</a>.  To make the math nice, let’s use 100 (100,000 kg).  Fun fact: the largest known dinosaur came in at around <a href="https://en.wikipedia.org/wiki/Blue_whale">90 metric tons</a>!  Anyways, with these constants, and the Universal Gravitational Constant – <a href="https://en.wikipedia.org/wiki/Gravitational_constant">6.674 x 10^-11 m^3/kg s^2</a> – let’s turn this into code.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">gravity</span><span class="p">(</span><span class="n">altitude</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns the force of gravity [N] at a given altitude [m]&quot;&quot;&quot;</span>
    <span class="n">earth_mass</span> <span class="o">=</span> <span class="mf">5.972e24</span> <span class="c"># [kg]</span>
    <span class="n">earth_radius</span> <span class="o">=</span> <span class="mf">6.367e6</span> <span class="c"># [m]</span>
    <span class="n">whale_mass</span> <span class="o">=</span> <span class="mi">100000</span> <span class="c"># [kg]</span>
    <span class="n">universal_grav_constant</span> <span class="o">=</span> <span class="mf">6.67384e-11</span> <span class="c"># [m^3/kg s^2]</span>

    <span class="n">radius</span> <span class="o">=</span> <span class="n">altitude</span> <span class="o">+</span> <span class="n">earth_radius</span> <span class="c"># [m]</span>
    <span class="c"># Assumption: the &#39;radius&#39; of the whale is negligible compared to</span>
    <span class="c"># the other sizes involved</span>

    <span class="c"># Here&#39;s the important bit:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">universal_grav_constant</span> <span class="o">*</span> <span class="n">whale_mass</span> <span class="o">*</span> <span class="n">earth_mass</span><span class="o">/</span><span class="p">(</span><span class="n">radius</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span></code></pre></div>

<p>Drag gets a little more interesting.  Because there is a startling lack of data on the aerodynamic characteristics of belly-flopping whales, we’ll assume the whale is diving towards the ground head-first.  <a href="http://jeb.biologists.org/content/jexbio/214/1/131.full.pdf">This article</a> is chock-full of informational goodies, such as the drag coefficient of a swimming whale (0.05) and the approximate projected cross-sectional area (10 m^2).  The projected cross-sectional area is sort-of like the size of the shadow the whale would cast if light was shone on it head-on.</p>

<p>It is important to note that the density of the atmosphere decreases with elevation, but not in a nice linear fashion.  We’ll need to model the following relationship in our code (approximately):</p>

<p><img src="/img/whale-density.gif" alt="Density Graph" /></p>

<p>In order to keep your interest, I’ll do some handwaving and leave that code out.</p>

<p>Here is the code for drag:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">drag</span><span class="p">(</span><span class="n">altitude</span><span class="p">,</span> <span class="n">velocity</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given altitude [m] and velocity [m/s], outputs the force of drag [N]&quot;&quot;&quot;</span>
    <span class="n">whale_drag_coefficient</span> <span class="o">=</span> <span class="mf">0.05</span> <span class="c"># [unitless]</span>
    <span class="n">whale_crossectional_area</span> <span class="o">=</span> <span class="mi">10</span> <span class="c"># [m^2]</span>
    <span class="n">result</span> <span class="o">=</span> <span class="o">.</span><span class="mi">5</span> <span class="o">*</span> <span class="n">whale_drag_coefficient</span> <span class="o">*</span> <span class="n">density</span><span class="p">(</span><span class="n">altitude</span><span class="p">)</span> <span class="c"># VIGOROUS HAND-WAVING!</span>
    <span class="n">result</span> <span class="o">*=</span> <span class="n">whale_crossectional_area</span> <span class="o">*</span> <span class="n">velociy</span><span class="o">**</span><span class="mi">2</span>

     <span class="c"># Drag always is opposite of the direction of motion.</span>
     <span class="c"># i.e. if whale falls down, drag is up and vice versa</span>
    <span class="k">if</span> <span class="n">velocity</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">result</span></code></pre></div>

<p>Great!  Two more steps before we get results.  First is to get acceleration of the whale.  Good ole’ <code>F = m * a</code>.  </p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">net_acceleration</span><span class="p">(</span><span class="n">altitude</span><span class="p">,</span> <span class="n">velocity</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sums all forces to calculate a net acceleration for next step.&quot;&quot;&quot;</span>
    <span class="n">gravity_force</span> <span class="o">=</span> <span class="n">gravity</span><span class="p">(</span><span class="n">altitude</span><span class="p">)</span> <span class="c"># [N]</span>
    <span class="n">drag_force</span> <span class="o">=</span> <span class="n">drag</span><span class="p">(</span><span class="n">altitude</span><span class="p">,</span> <span class="n">velocity</span><span class="p">)</span> <span class="c"># [N]</span>
    <span class="n">net_force</span> <span class="o">=</span> <span class="n">drag_force</span> <span class="o">-</span> <span class="n">gravity_force</span> <span class="c"># [N] assuming gravity is down.</span>
    
    <span class="c"># Since F=ma, a = F/m!</span>
    <span class="n">acceleration</span> <span class="o">=</span> <span class="n">net_force</span> <span class="o">/</span> <span class="n">WHALE_MASS</span> <span class="c"># [m/s^2]</span>
    <span class="k">return</span> <span class="n">acceleration</span></code></pre></div>

<h2 id="the-simulation">The Simulation</h2>

<p>Now we need to simulate the whole fall.  We’ll do this by getting each data point one by one.  If we know altitude and velocity at a given time, we can find acceleration with the function above.  In order to get the next velocity and position from a given acceleration, we’ll need the following function:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">integrate</span><span class="p">(</span><span class="n">acceleration</span><span class="p">,</span> <span class="n">current_velocity</span><span class="p">,</span> <span class="n">current_altitude</span><span class="p">,</span> <span class="n">timestep</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Gets future velocity and position from a given acceleration&quot;&quot;&quot;</span>
    <span class="n">new_velocity</span> <span class="o">=</span> <span class="n">current_velocity</span> <span class="o">+</span> <span class="n">acceleration</span> <span class="o">*</span> <span class="n">timestep</span> <span class="c"># Sort of a y = mx + b situation</span>
    <span class="n">new_altitude</span> <span class="o">=</span> <span class="n">current_altitude</span> <span class="o">+</span> <span class="n">current_velocity</span> <span class="o">*</span> <span class="n">timestep</span> <span class="c"># Same, but for altitude</span>
    <span class="k">return</span> <span class="n">new_velocity</span><span class="p">,</span> <span class="n">new_position</span></code></pre></div>

<p>This set of code is probably the least intuitive, but it basically boils down to the idea that if you go 20 miles per hour for 6 hours, you will have travelled 120 total miles (20 * 6).  Blah blah blah science handwaving.  You can see the full code and comments <a href="https://github.com/rpalo/whale-drop">here</a>.  I’m still working on cleaning it up and factoring out the constants.  Let’s get to the whale.</p>

<h2 id="the-results">The Results</h2>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&quot;results.csv&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s">&quot;Time&quot;</span><span class="p">],</span> <span class="n">results</span><span class="p">[</span><span class="s">&quot;Height&quot;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre></div>

<p><img src="/img/whale-height-plot.png" alt="Graph of height vs time" /></p>

<p>Looks pretty much like we would expect.  First he was up.  Then he came down and it was fast.  So?  Let’s look at the forces he felt.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">results</span><span class="p">[</span><span class="s">&quot;Force&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">&quot;Acceleration&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100000</span> <span class="c"># whale mass [kg]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s">&quot;Time&quot;</span><span class="p">],</span> <span class="n">results</span><span class="p">[</span><span class="s">&quot;Force&quot;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre></div>

<p><img src="/img/whale-force-time-plot.png" alt="Graph of force vs time" /></p>

<p>Woah!  Let’s get a better look at that spike.</p>

<p><img src="/img/whale-force-impact.png" alt="Zoomed in plot of force" /></p>

<p>You can see he is feeling some crazy gravitational forces in the downward direction until WHAMMO!  Checking the height of the whale right around this point shows that he’s where we are splitting the upper and lower Stratosphere: <a href="https://www.grc.nasa.gov/WWW/K-12/airplane/atmosmet.html">~25000 m</a>.  Basically, our whale is faceplanting onto our atmosphere.  Realistically, I’m pretty sure that, if our whale hadn’t burned up already, we would have a localized whale-splosion and whale-shower.  </p>

<p>So that’s it for now.  That’s probably all you can stand.  For future work, I recommend evaluating the heat generated from drag and estimating the ignition point of an airborne sea mammal to find out if he disintegrates or explodes first.  Too gruesome?  Yeah, probably.  Don’t worry.  He had a very exciting time on the way down.</p>

<blockquote>
  <p>Never mind, hey, this is really exciting, so much to find out about, so much to look forward to, I’m quite dizzy with anticipation! - The Whale</p>
</blockquote>
</p>
  
  <hr>

<!-- Footer for Homepage -->
  <div id="home-footer">
    <div id="left-home-footer">
      <!-- Featured Posts List -->
      <h2>Featured Posts</h2>
      <ul class="post-list">
        <li>
          <span class="post-meta">Jan 18, 2017</span>
          <a class="post-link" href="/2017/01/18/assert-not-magic.html">Assert Not Magic</a>
        </li>
        
          <li>
            <span class="post-meta">May 5, 2017</span>
            <a class="post-link" href="/2017/05/05/plan-your-commits.html">Plan Your Commits</a>
          </li>
        
          <li>
            <span class="post-meta">May 1, 2017</span>
            <a class="post-link" href="/2017/05/01/fanbot-and-doing-new-things-right.html">Fanbot, and Doing New Things Right</a>
          </li>
        
          <li>
            <span class="post-meta">Apr 25, 2017</span>
            <a class="post-link" href="/2017/04/25/jekyll-tags-the-easy-way.html">Jekyll Tags, the Easy Way</a>
          </li>
        
      </ul>
    </div>
    <div id="center-home-footer">
      <!-- Spacer -->
    </div>
    <div id="right-home-footer">
      <!-- Tags List -->
      <h2>Tags</h2>
      <p>
        
        <a href="/tags/python/" style="font-size: 38px">python | </a>
        
        <a href="/tags/django/" style="font-size: 14px">django | </a>
        
        <a href="/tags/rails/" style="font-size: 14px">rails | </a>
        
        <a href="/tags/algorithms/" style="font-size: 20px">algorithms | </a>
        
        <a href="/tags/editors/" style="font-size: 16px">editors | </a>
        
        <a href="/tags/emacs/" style="font-size: 16px">emacs | </a>
        
        <a href="/tags/ai/" style="font-size: 14px">ai | </a>
        
        <a href="/tags/r/" style="font-size: 14px">r | </a>
        
        <a href="/tags/tools/" style="font-size: 14px">tools | </a>
        
        <a href="/tags/javascript/" style="font-size: 14px">javascript | </a>
        
        <a href="/tags/not_magic/" style="font-size: 14px">not_magic | </a>
        
        <a href="/tags/soft-skills/" style="font-size: 18px">soft-skills | </a>
        
        <a href="/tags/tricks/" style="font-size: 24px">tricks | </a>
        
        <a href="/tags/vscode/" style="font-size: 14px">vscode | </a>
        
        <a href="/tags/vim/" style="font-size: 14px">vim | </a>
        
        <a href="/tags/sublime/" style="font-size: 14px">sublime | </a>
        
        <a href="/tags/puzzle/" style="font-size: 16px">puzzle | </a>
        
        <a href="/tags/bash/" style="font-size: 14px">bash | </a>
        
        <a href="/tags/math/" style="font-size: 14px">math | </a>
        
        <a href="/tags/teaching/" style="font-size: 14px">teaching | </a>
        
        <a href="/tags/ruby/" style="font-size: 16px">ruby | </a>
        
        <a href="/tags/jekyll/" style="font-size: 14px">jekyll | </a>
        
        <a href="/tags/git/" style="font-size: 14px">git | </a>
        
        <a href="/tags/physics/" style="font-size: 14px">physics | </a>
        
        <a href="/tags/fun/" style="font-size: 14px">fun | </a>
        
        <a href="/tags/scientific/" style="font-size: 14px">scientific | </a>
        
      </p>
    </div>
  </div>
  <hr>
  

  <p class="rss-subscribe">subscribe <a href="/feed.xml">via RSS</a></p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-91889165-1', 'auto');
  ga('send', 'pageview');

</script>
</div>

          </article>
        </div>

        <footer id="main-footer">
    <div class="container">
        <p class="text-muted">&copy; Ryan Palo 2017 | All things.  Phil. 4:13</p>
    </div>
</footer>
        
        <!-- Custom Javascript -->
        <script src="/js/home.js"></script>
        
    </body>
</html>

